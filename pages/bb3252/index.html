<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>文件管理与IO重定向 | Welly&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="拖延和等待是世界上最容易压垮一个人斗志的东西">
    <meta name="keywords" content="个人技术博客,技术文档,学习,面试,运维、开发、Devops、Openstack">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.184091d3.css" as="style"><link rel="preload" href="/assets/js/app.01d507bc.js" as="script"><link rel="preload" href="/assets/js/2.93cb7982.js" as="script"><link rel="preload" href="/assets/js/34.3bce2d0a.js" as="script"><link rel="prefetch" href="/assets/js/10.2b0b4e7c.js"><link rel="prefetch" href="/assets/js/11.c542be52.js"><link rel="prefetch" href="/assets/js/12.d6f830d1.js"><link rel="prefetch" href="/assets/js/13.fde9367f.js"><link rel="prefetch" href="/assets/js/14.f31f01c1.js"><link rel="prefetch" href="/assets/js/15.ec5c08ac.js"><link rel="prefetch" href="/assets/js/16.97dc374d.js"><link rel="prefetch" href="/assets/js/17.8ea152a4.js"><link rel="prefetch" href="/assets/js/18.5c43954c.js"><link rel="prefetch" href="/assets/js/19.cd44ea94.js"><link rel="prefetch" href="/assets/js/20.5eef60cf.js"><link rel="prefetch" href="/assets/js/21.5f4cd2ae.js"><link rel="prefetch" href="/assets/js/22.fed59515.js"><link rel="prefetch" href="/assets/js/23.9bdb28b4.js"><link rel="prefetch" href="/assets/js/24.fce5cf16.js"><link rel="prefetch" href="/assets/js/25.5fa1cf6c.js"><link rel="prefetch" href="/assets/js/26.f0c3f8fc.js"><link rel="prefetch" href="/assets/js/27.51561249.js"><link rel="prefetch" href="/assets/js/28.3f34e325.js"><link rel="prefetch" href="/assets/js/29.d27d420b.js"><link rel="prefetch" href="/assets/js/3.e6c407b4.js"><link rel="prefetch" href="/assets/js/30.34924c33.js"><link rel="prefetch" href="/assets/js/31.cbaaea43.js"><link rel="prefetch" href="/assets/js/32.9154be04.js"><link rel="prefetch" href="/assets/js/33.ecad44fa.js"><link rel="prefetch" href="/assets/js/4.158afa9a.js"><link rel="prefetch" href="/assets/js/5.d2aab8ad.js"><link rel="prefetch" href="/assets/js/6.1f840770.js"><link rel="prefetch" href="/assets/js/7.37862b3a.js"><link rel="prefetch" href="/assets/js/8.6c6f78e8.js"><link rel="prefetch" href="/assets/js/9.dbe4be0f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.184091d3.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Welly's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><a href="/Operation and maintenance/" class="link-title">运维</a> <span class="title" style="display:none;">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Linux</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/Linux/" class="nav-link">Linux命令</a></li><li class="dropdown-subitem"><a href="/note/shell/" class="nav-link">脚本编程</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发" class="dropdown-title"><a href="/Develop/" class="link-title">开发</a> <span class="title" style="display:none;">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">Go</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="云计算" class="dropdown-title"><a href="/Cloud Computing/" class="link-title">云计算</a> <span class="title" style="display:none;">云计算</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">公有云</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">私有云</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">容器云</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/frksb/frksb.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://welly-1309124637.cos.ap-shanghai.myqcloud.com/202205041509205.png"> <div class="blogger-info"><h3>Welly</h3> <span>一只运维小白🥬</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><a href="/Operation and maintenance/" class="link-title">运维</a> <span class="title" style="display:none;">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Linux</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/Linux/" class="nav-link">Linux命令</a></li><li class="dropdown-subitem"><a href="/note/shell/" class="nav-link">脚本编程</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发" class="dropdown-title"><a href="/Develop/" class="link-title">开发</a> <span class="title" style="display:none;">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">Go</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="云计算" class="dropdown-title"><a href="/Cloud Computing/" class="link-title">云计算</a> <span class="title" style="display:none;">云计算</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">公有云</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">私有云</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">容器云</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/frksb/frksb.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/pages/504aaa/" class="sidebar-link">计算机基础与操作系统</a></li><li><a href="/pages/c01e45/" class="sidebar-link">Linux基础入门</a></li><li><a href="/pages/bb3252/" aria-current="page" class="active sidebar-link">文件管理与IO重定向</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/bb3252/#📌文件系统目录结构" class="sidebar-link">📌文件系统目录结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/bb3252/#常见的文件系统目录功能" class="sidebar-link">常见的文件系统目录功能</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb3252/#文件系统目录结构规则" class="sidebar-link">文件系统目录结构规则</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb3252/#应用程序的组成部分" class="sidebar-link">应用程序的组成部分</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb3252/#linux下的文件类型" class="sidebar-link">Linux下的文件类型</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/bb3252/#📌文件操作命令" class="sidebar-link">📌文件操作命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/bb3252/#显示当前工作目录" class="sidebar-link">显示当前工作目录</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb3252/#绝对路径和相对路径" class="sidebar-link">绝对路径和相对路径</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb3252/#更改目录" class="sidebar-link">更改目录</a></li><li class="sidebar-sub-header level4"><a href="/pages/bb3252/#🧩cd" class="sidebar-link">🧩cd</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb3252/#列出目录内容" class="sidebar-link">列出目录内容</a></li><li class="sidebar-sub-header level4"><a href="/pages/bb3252/#🧩ls" class="sidebar-link">🧩ls</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb3252/#查看文件状态stat" class="sidebar-link">查看文件状态stat</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb3252/#确定文件内容" class="sidebar-link">确定文件内容</a></li><li class="sidebar-sub-header level4"><a href="/pages/bb3252/#🧩file" class="sidebar-link">🧩file</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb3252/#文件通配符模式wildcard-pattern" class="sidebar-link">文件通配符模式wildcard pattern</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb3252/#创建空文件和刷新时间" class="sidebar-link">创建空文件和刷新时间</a></li><li class="sidebar-sub-header level4"><a href="/pages/bb3252/#🧩touch" class="sidebar-link">🧩touch</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb3252/#复制文件和目录" class="sidebar-link">复制文件和目录</a></li><li class="sidebar-sub-header level4"><a href="/pages/bb3252/#🧩cp" class="sidebar-link">🧩cp</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb3252/#移动和重命名文件" class="sidebar-link">移动和重命名文件</a></li><li class="sidebar-sub-header level4"><a href="/pages/bb3252/#🧩mv" class="sidebar-link">🧩mv</a></li><li class="sidebar-sub-header level4"><a href="/pages/bb3252/#🧩rename" class="sidebar-link">🧩rename</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb3252/#删除文件" class="sidebar-link">删除文件</a></li><li class="sidebar-sub-header level4"><a href="/pages/bb3252/#🧩rm" class="sidebar-link">🧩rm</a></li><li class="sidebar-sub-header level4"><a href="/pages/bb3252/#🧩shred" class="sidebar-link">🧩shred</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb3252/#目录操作" class="sidebar-link">目录操作</a></li><li class="sidebar-sub-header level4"><a href="/pages/bb3252/#🧩显示目录树tree" class="sidebar-link">🧩显示目录树tree</a></li><li class="sidebar-sub-header level4"><a href="/pages/bb3252/#🧩创建目录mkdir" class="sidebar-link">🧩创建目录mkdir</a></li><li class="sidebar-sub-header level4"><a href="/pages/bb3252/#🧩删除空目录rmdir" class="sidebar-link">🧩删除空目录rmdir</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/bb3252/#📌文件元数据和节点表结构" class="sidebar-link">📌文件元数据和节点表结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/bb3252/#inode表结构" class="sidebar-link">inode表结构</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb3252/#硬链接" class="sidebar-link">硬链接</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb3252/#符号链接-软链接" class="sidebar-link">符号链接（软链接）</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb3252/#🔥硬链接和软链接区别总结" class="sidebar-link">🔥硬链接和软链接区别总结</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/bb3252/#📌io重定向和管道" class="sidebar-link">📌IO重定向和管道</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/bb3252/#标准输入和输出" class="sidebar-link">标准输入和输出</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb3252/#i-o重定向" class="sidebar-link">I/O重定向</a></li><li class="sidebar-sub-header level4"><a href="/pages/bb3252/#标准输出和错误重新定向" class="sidebar-link">标准输出和错误重新定向</a></li><li class="sidebar-sub-header level4"><a href="/pages/bb3252/#标准输入重定向" class="sidebar-link">标准输入重定向</a></li><li class="sidebar-sub-header level5"><a href="/pages/bb3252/#🧩tr命令" class="sidebar-link">🧩tr命令</a></li><li class="sidebar-sub-header level5"><a href="/pages/bb3252/#标准输入重定向-2" class="sidebar-link">标准输入重定向</a></li><li class="sidebar-sub-header level5"><a href="/pages/bb3252/#把多行重定向" class="sidebar-link">把多行重定向</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb3252/#管道" class="sidebar-link">管道</a></li><li class="sidebar-sub-header level4"><a href="/pages/bb3252/#🧩tee命令" class="sidebar-link">🧩tee命令</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb3252/#重定向中的-符号" class="sidebar-link">重定向中的-符号</a></li></ul></li></ul></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1baff76c><div class="articleInfo" data-v-1baff76c><ul class="breadcrumbs" data-v-1baff76c><li data-v-1baff76c><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-1baff76c></a></li> <li data-v-1baff76c><a href="/categories/?category=%E3%80%8ALinux%E3%80%8B%E7%AC%94%E8%AE%B0" title="分类" data-v-1baff76c>《Linux》笔记</a></li></ul> <div class="info" data-v-1baff76c><div title="作者" class="author iconfont icon-touxiang" data-v-1baff76c><a href="https://github.com/frksb" target="_blank" title="作者" class="beLink" data-v-1baff76c>Welly</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1baff76c><a href="javascript:;" data-v-1baff76c>2022-05-17</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">文件管理与IO重定向<!----></h1>  <div class="theme-vdoing-content content__default"><h2 id="📌文件系统目录结构"><a href="#📌文件系统目录结构" class="header-anchor">#</a> 📌文件系统目录结构</h2> <p><img src="https://raw.githubusercontent.com/frksb/blogImage/main/202205172030490.png" alt="image-20220412131110548"></p> <h3 id="常见的文件系统目录功能"><a href="#常见的文件系统目录功能" class="header-anchor">#</a> 常见的文件系统目录功能</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>/boot: 引导文件存放目录，内核文件<span class="token punctuation">(</span>vmlinuz<span class="token punctuation">)</span>、引导加载器<span class="token punctuation">(</span>bootloader，grub<span class="token punctuation">)</span>都存放于此目录
/bin: 所有用户使用的基本命令；不能关联至独立分区，os启动即会用到的程序
/sbin: 管理类的基本命令；不能关联至独立分区，os启动即会用到的程序
/lib: 启动时程序依赖的基本共享库文件以及内核模块文件<span class="token punctuation">(</span>/lib/modules<span class="token punctuation">)</span>
/lib64: 专用于x86_64系统上的辅助共享库文件存放位置
/etc: 配置文件目录
/home/USERHOME: 普通用户的家目录
/root: 管理员的家目录
/media: 便携式移动设备挂载点
/mnt: 临时文件系统挂载点
/dev: 设备及特殊文件存储位置
      b: block device 随机访问
      c: character device 线性访问
/opt: 第三方应用程序的安装位置
/srv: 系统上运行的服务用到的数据
/tmp: 临时文件存储位置
/usr: <span class="token punctuation">(</span>universal shared,read-only data<span class="token punctuation">)</span>
      bin: 保证系统拥有完整功能而提供的应用程序
      sbin: 
      lib: <span class="token number">32</span>位使用
      lib64: 只存64位系统
      include: C语言的头文件<span class="token punctuation">(</span>header files<span class="token punctuation">)</span>
      share: 结构化独立的数据，例如doc,man等
      local: 第三方应用程序的安装位置
/var: <span class="token punctuation">(</span>variable data files<span class="token punctuation">)</span>
      cache: 应用程序缓存数据目录
      lib: 应用程序状态信息数据
      local: 专用于位/usr/local下的应用程序存储可变数据
      lock: 锁文件
      log: 日志目录及文件
      opt: 专用于为/opt下的应用程序存储可变数据
      run: 运行中的进程相关数据，通常用于存储进程pid文件
      spool: 应用程序数据池
      tmp: 保存系统两次重启之间产生的临时数据
/proc: 用于输出内核与进程信息相关的虚拟文件系统
/sys: 用于输出当前系统上硬件设备相关信息虚拟文件系统
/selinux: <span class="token punctuation">(</span>security enhanced Linux<span class="token punctuation">)</span>,selinux相关的安全策略等信息的存储位置  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h3 id="文件系统目录结构规则"><a href="#文件系统目录结构规则" class="header-anchor">#</a> 文件系统目录结构规则</h3> <ul><li>文件和目录被组织成一个单根倒置树结构</li> <li>文件系统从根目录下开始，用&quot;/&quot;表示</li> <li>根文件系统(rootfs)：root filesystem</li> <li>标准Linux文件系统（如:ext4），文件名称大小敏感，如：MAIL、Mail、mAiL</li> <li>以 . 开头的文件为隐藏文件</li> <li>路径分隔的 /</li> <li>文件名最长255个字节</li> <li>包括路径在内文件名称最长4095个字节</li> <li><strong>蓝色：目录；绿色：可执行文件；红色：压缩文件；浅蓝色：链接文件；灰色：其它文件</strong></li> <li>除了斜杠和NUL，所有字符都有效，但使用特殊字符的目录名和文件不推荐使用，有些字符需要用引号来引用</li> <li>每个文件都有两类相关数据，元数据：metadata，即属性；数据：data，即文件内容</li></ul> <h3 id="应用程序的组成部分"><a href="#应用程序的组成部分" class="header-anchor">#</a> 应用程序的组成部分</h3> <ul><li><p><strong>二进制程序</strong>：<code>/bin</code>，<code>/sbin</code>，<code>/usr/bin</code>，<code>/usr/sbin</code>，<code>/usr/local/bin</code>，<code>/usr/local/sbin</code></p></li> <li><p><strong>库文件</strong>：<code>/lib</code>，<code>/lib64</code>，<code>/usr/lib</code>，<code>/usr/lib64</code>，<code>/usr/local/lib</code>，<code>/usr/local/lib64</code></p></li> <li><p><strong>配置文件</strong>：<code>/etc</code>，<code>/etc/DIRECTORY</code>，<code>/usr/local/etc</code></p></li> <li><p><strong>帮助文件</strong>：<code>/usr/local/share/man</code>，<code>/usr/local/share/doc</code>，<code>/usr/local/share/man</code>，<code>/usr/local/share/doc</code></p></li></ul> <h3 id="linux下的文件类型"><a href="#linux下的文件类型" class="header-anchor">#</a> Linux下的文件类型</h3> <ul><li><code>-</code>  普通文件</li> <li><code>d</code> 目录文件directory</li> <li><code>l</code>  符号链接文件link</li> <li><code>b</code> 块设备block</li> <li><code>c</code> 字符设备character</li> <li><code>p</code> 管道文件pipe</li> <li><code>s</code> 套接字文件socket</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>👇举例：
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ll /run</span>
prw-------  <span class="token number">1</span> root           root              <span class="token number">0</span> Mar <span class="token number">24</span> <span class="token number">13</span>:59 autofs.fifo.misc
prw-------  <span class="token number">1</span> root           root              <span class="token number">0</span> Mar <span class="token number">24</span> <span class="token number">13</span>:59 autofs.fifo-net
srw-rw-rw-  <span class="token number">1</span> mysql          mysql             <span class="token number">0</span> Dec  <span class="token number">9</span> <span class="token number">20</span>:41 /var/lib/mysql/mysql.sock

<span class="token comment">## fifo(first in first out):这两个文件是管道文件，目的是为了实现两个软件通讯用的。例如分别有软件A和软件B，软件A通过管道进行写操作，软件B通过管道进行读操作，并且读写顺序是单向的</span>
<span class="token comment">## socket文件也是可以用来实现两个软件通讯的，但是这两个软件之间可以进行双向的读写操作</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="📌文件操作命令"><a href="#📌文件操作命令" class="header-anchor">#</a> 📌文件操作命令</h2> <h3 id="显示当前工作目录"><a href="#显示当前工作目录" class="header-anchor">#</a> 显示当前工作目录</h3> <p>每个shell和系统进程都有一个当前的工作目录CWD(current work directory)</p> <p><strong>显示当前shell CWD的绝对路径</strong></p> <p><code>pwd</code>命令：printing working directory</p> <ul><li>-P ：显示真实物理路径</li> <li>-L ：显示链路路径(默认)</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># pwd</span>
/root
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cd /data</span>
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># pwd</span>
/data
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># cd /bin</span>
<span class="token punctuation">[</span>root@centos bin<span class="token punctuation">]</span><span class="token comment"># pwd -P</span>
/usr/bin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="绝对路径和相对路径"><a href="#绝对路径和相对路径" class="header-anchor">#</a> 绝对路径和相对路径</h3> <p><strong>绝对路径</strong>：</p> <ol><li>以正斜杠 / 即根目录开始</li> <li>完整的文件位置路径</li> <li>可用于任何想指定一个文件名的时候</li></ol> <p><strong>相对路径</strong>：</p> <ol><li>不以斜线开始</li> <li>一般情况下，是指相对于当前工作目录的路径。特殊场景下，是相对于某目录的位置</li> <li>可以作为一个简短的形式指定一个文件名</li></ol> <p><strong>基名(basename)</strong>：只取文件名而不要路径</p> <p><strong>目录名(dirname)</strong>：只取路径，不要文件名</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># basename /etc/sysconfig/network-scripts/ifcfg-ens33 </span>
ifcfg-ens33
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># dirname /etc/sysconfig/network-scripts/ifcfg-ens33 </span>
/etc/sysconfig/network-scripts
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="更改目录"><a href="#更改目录" class="header-anchor">#</a> 更改目录</h3> <h4 id="🧩cd"><a href="#🧩cd" class="header-anchor">#</a> 🧩cd</h4> <p><code>cd</code>命令(change directory) ：改变目录</p> <ul><li>-P : 切换至物理路径，而非软链接目录</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>👇举例：
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cd -P /bin</span>
<span class="token punctuation">[</span>root@centos bin<span class="token punctuation">]</span><span class="token comment"># pwd</span>
/usr/bin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>可以使用绝对或相对路径</strong>：</p> <ul><li>切换至父目录：<code>cd ..</code></li> <li>切换至当前用户主目录：<code>cd</code>或<code>cd ~</code></li> <li>切换至以前的工作目录：<code>cd -</code></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>👇举例：
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cd -P /bin</span>
<span class="token punctuation">[</span>root@centos bin<span class="token punctuation">]</span><span class="token comment"># cd -</span>
/root
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cd -</span>
/bin
注意：cd - 只能返回前一级的目录，不能返回前一级目录的前一级
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code>👇举例：切换至其它用户的家目录（只有在root下才可以进入成功）
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cd ~peggie                      </span>
<span class="token punctuation">[</span>root@centos peggie<span class="token punctuation">]</span><span class="token comment"># pwd</span>
/home/peggie
<span class="token punctuation">[</span>pig@centos ~<span class="token punctuation">]</span>$ <span class="token builtin class-name">cd</span> ~peggie
-bash: cd: /home/peggie: Permission denied
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>相关的环境变量</strong>：</p> <ul><li>PWD：当前目录路径</li> <li>OLDPWD：上一次目录路径</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># echo $OLDPWD</span>
/usr/bin

<span class="token comment">## 其实OLDPWD变量存放的就是上一级目录路径，如果讲OLDPWD变量修改之后，执行cd -就会返回到修改后的目录路径</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="列出目录内容"><a href="#列出目录内容" class="header-anchor">#</a> 列出目录内容</h3> <h4 id="🧩ls"><a href="#🧩ls" class="header-anchor">#</a> 🧩ls</h4> <p><code>ls</code>命令可以列出当前目录的内容或指定目录</p> <p>📍<strong>命令格式</strong>：</p> <div class="language-http line-numbers-mode"><pre class="language-http"><code>ls [options] [files_or_firs]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>常用选项</strong>：</p> <ul><li>-a ： 包含隐藏文件</li> <li>-l ： 显示额外的信息</li> <li>-R ： 目录递归</li> <li>-ld ： 目录和符号链接信息</li> <li>-1 ： 文件分行显示</li> <li>-S ： 按从大到小排序</li> <li>-t ： 按从新到旧mtime排序</li> <li>-u ： 配合 -t 选项，显示并按从新到旧atime排序</li> <li>-U ： 按目录存放顺序显示</li> <li>-X ： 按文件后缀排序</li> <li>-F ： 对不同类型文件显示时附加不同的符号：* / = &gt; @ |</li> <li>-C ： 文件多时，以多列的方式显示文件，默认是一列（标准输出）</li></ul> <blockquote><p>atime：(Access time)，最后一次访问文件（读取或执行）的时间</p> <p>ctime：(Change time)，最后一次改变文件（属性）或目录（属性）的时间</p> <p>mtime：(Modify time)，最后一次改变文件（内容）或目录（内容）的时间</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>👇举例：在CentOS系统和Ubuntu系统中ll命令分别代表的意义<span class="token punctuation">(</span>即别名<span class="token punctuation">)</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># type ll</span>
ll is aliased to <span class="token variable"><span class="token variable">`</span><span class="token function">ls</span> -l --color<span class="token operator">=</span>auto'   
<span class="token comment">##不同文件系统类型只会有不同的颜色区分</span>

<span class="token punctuation">[</span>root@ubuntu1804 ~<span class="token punctuation">]</span><span class="token comment"># type ll</span>
ll is aliased to <span class="token variable">`</span></span><span class="token function">ls</span> -alF'
<span class="token comment">##不同文件系统类型除了有不同的颜色区分之外还会附加不同的符号，并且还会显示隐藏文件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>👉注意：<code>ls -l</code>看到文件的大小不一定是实际文件真正占用空间的大小</p> <p><strong>文件类型的颜色定义</strong></p> <p><code>ls</code>查看不同后缀文件时的颜色由<code>/etc/DIR_COLORS</code>和<code>@LS_COLORS</code>变量定义</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># echo $LS_COLORS</span>
<span class="token assign-left variable">rs</span><span class="token operator">=</span><span class="token number">0</span>:di<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">34</span>:ln<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">36</span>:mh<span class="token operator">=</span>00:pi<span class="token operator">=</span><span class="token number">40</span><span class="token punctuation">;</span><span class="token number">33</span>:so<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:do<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:bd<span class="token operator">=</span><span class="token number">40</span><span class="token punctuation">;</span><span class="token number">33</span><span class="token punctuation">;</span>01:cd<span class="token operator">=</span><span class="token number">40</span><span class="token punctuation">;</span><span class="token number">33</span><span class="token punctuation">;</span>01:or<span class="token operator">=</span><span class="token number">40</span><span class="token punctuation">;</span><span class="token number">31</span><span class="token punctuation">;</span>01:mi<span class="token operator">=</span>01<span class="token punctuation">;</span>05<span class="token punctuation">;</span><span class="token number">37</span><span class="token punctuation">;</span><span class="token number">41</span>:su<span class="token operator">=</span><span class="token number">37</span><span class="token punctuation">;</span><span class="token number">41</span>:sg<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">;</span><span class="token number">43</span>:ca<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">;</span><span class="token number">41</span>:tw<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">;</span><span class="token number">42</span>:ow<span class="token operator">=</span><span class="token number">34</span><span class="token punctuation">;</span><span class="token number">42</span>:st<span class="token operator">=</span><span class="token number">37</span><span class="token punctuation">;</span><span class="token number">44</span>:ex<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">32</span>:*.tar<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.tgz<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.arc<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.arj<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.taz<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.lha<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.lz4<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.lzh<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.lzma<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.tlz<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.txz<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.tzo<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.t7z<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.zip<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.z<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.Z<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.dz<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.gz<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.lrz<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.lz<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.lzo<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.xz<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.bz2<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.bz<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.tbz<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.tbz2<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.tz<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.deb<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.rpm<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.jar<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.war<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.ear<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.sar<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.rar<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.alz<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.ace<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.zoo<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.cpio<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.7z<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.rz<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.cab<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">31</span>:*.jpg<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.jpeg<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.gif<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.bmp<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.pbm<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.pgm<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.ppm<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.tga<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.xbm<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.xpm<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.tif<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.tiff<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.png<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.svg<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.svgz<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.mng<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.pcx<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.mov<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.mpg<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.mpeg<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.m2v<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.mkv<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.webm<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.ogm<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.mp4<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.m4v<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.mp4v<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.vob<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.qt<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.nuv<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.wmv<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.asf<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.rm<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.rmvb<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.flc<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.avi<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.fli<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.flv<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.gl<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.dl<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.xcf<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.xwd<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.yuv<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.cgm<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.emf<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.axv<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.anx<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.ogv<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.ogx<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">35</span>:*.aac<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">36</span>:*.au<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">36</span>:*.flac<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">36</span>:*.mid<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">36</span>:*.midi<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">36</span>:*.mka<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">36</span>:*.mp3<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">36</span>:*.mpc<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">36</span>:*.ogg<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">36</span>:*.ra<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">36</span>:*.wav<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">36</span>:*.axa<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">36</span>:*.oga<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">36</span>:*.spx<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">36</span>:*.xspf<span class="token operator">=</span>01<span class="token punctuation">;</span><span class="token number">36</span>:
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="查看文件状态stat"><a href="#查看文件状态stat" class="header-anchor">#</a> 查看文件状态stat</h3> <p>文件相关信息：metadata，data</p> <p>每个文件有三个时间戳：</p> <ul><li>access time（atime）：最后一次访问文件（读取或执行）的时间</li> <li>modify time（mtime）：最后一次改变文件（内容）或目录（内容）的时间</li> <li>change time（ctime）：最后一次改变元数据的时间</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># stat anaconda-ks.cfg</span>
  File: ‘anaconda-ks.cfg’
  Size: <span class="token number">1578</span>      	Blocks: <span class="token number">8</span>          IO Block: <span class="token number">4096</span>   regular <span class="token function">file</span>
Device: 802h/2050d	Inode: <span class="token number">201326658</span>   Links: <span class="token number">1</span>
Access: <span class="token punctuation">(</span>0600/-rw-------<span class="token punctuation">)</span>  Uid: <span class="token punctuation">(</span>    <span class="token number">0</span>/    root<span class="token punctuation">)</span>   Gid: <span class="token punctuation">(</span>    <span class="token number">0</span>/    root<span class="token punctuation">)</span>
Context: system_u:object_r:admin_home_t:s0
Access: <span class="token number">2022</span>-04-11 <span class="token number">14</span>:17:43.647715917 +0800
Modify: <span class="token number">2022</span>-04-01 <span class="token number">16</span>:20:38.160463699 +0800
Change: <span class="token number">2022</span>-04-01 <span class="token number">16</span>:20:38.160463699 +0800
 Birth: -
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p>当频繁读取某个文件时，再通过stat查看文件状态，文件的atime不会频繁更新。</p> <p>atime更新是有条件的，1.当两次读取文件的时间间隔<strong>超过1天以上</strong>才会更新</p> <p>​                                      2.<strong>mtime比atime新</strong>的时候，atime会重新更新</p></blockquote> <p><strong>单独看文件的atime、ctime</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls -l --time=atime anaconda-ks.cfg</span>
-rw-------. <span class="token number">1</span> root root <span class="token number">1578</span> Apr <span class="token number">11</span> <span class="token number">14</span>:17 anaconda-ks.cfg
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls -l --time=ctime anaconda-ks.cfg </span>
-rw-------. <span class="token number">1</span> root root <span class="token number">1578</span> Apr  <span class="token number">1</span> <span class="token number">16</span>:20 anaconda-ks.cfg
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="确定文件内容"><a href="#确定文件内容" class="header-anchor">#</a> 确定文件内容</h3> <h4 id="🧩file"><a href="#🧩file" class="header-anchor">#</a> 🧩file</h4> <p>文件可以包含多种类型的数据，使用file命令检查文件的类型，然后确定适当的打开命令或应用程序使用</p> <p>📍<strong>命令格式</strong>：</p> <div class="language-http line-numbers-mode"><pre class="language-http"><code>file [options] &lt;filename&gt;...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>常用选项</strong>：</p> <ul><li>-b ： 列出文件辨识结果时，不显示文件名称</li> <li>-f ： filelist列出文件filelist中文件名的文件类型</li> <li>-F ： 使用指定分割符号替换输出文件名后默认的 “:” 分隔符</li> <li>-L ： 查看对应软链接对应文件的文件类型</li> <li>--help ： 显示命令在线帮助</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cat list.txt</span>
/etc
/bin
/etc/issue
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># file -f list.txt </span>
/etc:       directory
/bin:       symbolic <span class="token function">link</span> to `usr/bin'
/etc/issue: ASCII text
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>Linux不太注重文件名的后缀，例如：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ll /usr/bin/hostname</span>
-rwxr-xr-x. <span class="token number">1</span> root root <span class="token number">15784</span> Oct <span class="token number">19</span>  <span class="token number">2019</span> /usr/bin/hostname  <span class="token punctuation">(</span>无后缀<span class="token punctuation">)</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># mv /usr/bin/hostname /usr/bin/hostname.txt</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># hostname.txt</span>
centos.pig.org
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>此时使用file命令来检查文件的类型</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># file /usr/bin/hostname.txt</span>
/usr/bin/hostname.txt: ELF <span class="token number">64</span>-bit LSB executable, x86-64, version <span class="token number">1</span> <span class="token punctuation">(</span>SYSV<span class="token punctuation">)</span>, dynamically linked <span class="token punctuation">(</span>uses shared libs<span class="token punctuation">)</span>, <span class="token keyword">for</span> GNU/Linux <span class="token number">2.6</span>.32, BuildID<span class="token punctuation">[</span>sha1<span class="token punctuation">]</span><span class="token operator">=</span>93633698bd11eeb4bee21a388c191a5656990d8e, stripped
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>结果显示的并不是文本文件，而是ELF的可执行文件</p></blockquote> <h3 id="文件通配符模式wildcard-pattern"><a href="#文件通配符模式wildcard-pattern" class="header-anchor">#</a> 文件通配符模式wildcard pattern</h3> <p>文件通配符可以用来匹配符合条件的多个条件，方便批量管理文件。通配符采有特定的符号，表示特定的含义，此特定的符号称为元meta字符。</p> <p><strong>常见的通配符</strong>：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>*			匹配零个或多个字符，但不匹配“.”开头的文件，即隐藏文件
?			匹配任何单个字符，一个汉字也算一个字符
~			当前用户家目录
~peggie 	当前peggie家目录
.和~+       当前工作目录
~-      	前一个工作目录
<span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span>		匹配数字范围
<span class="token punctuation">[</span>a-z<span class="token punctuation">]</span>		一个字母
<span class="token punctuation">[</span>A-Z<span class="token punctuation">]</span>		一个字母
<span class="token punctuation">[</span>peggie<span class="token punctuation">]</span>	匹配列表中的任何一个字符
<span class="token punctuation">[</span>^peggie<span class="token punctuation">]</span>	匹配列表中的所有字符以外的字符
<span class="token punctuation">[</span>^a-z<span class="token punctuation">]</span>		匹配列表中的所有字符以外的字符
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">## *不匹配“.”开头的文件，即使和ls -a命令搭配使用也无法查看隐藏文件</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls *.txt</span>
list.txt  test.txt
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># touch .txt</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls *.txt -a </span>
list.txt  test.txt

<span class="token comment">##[a-z]和[A-Z]匹配的字母是按照“小写大写”的顺序</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls</span>
fa.txt  fc.txt  fe.txt  fg.txt  fi.txt  fk.txt  fm.txt  fo.txt  fq.txt  fs.txt  fu.txt  fw.txt  fy.txt
fA.txt  fC.txt  fE.txt  fG.txt  fI.txt  fK.txt  fM.txt  fO.txt  fQ.txt  fS.txt  fU.txt  fW.txt  fY.txt
fb.txt  fd.txt  ff.txt  fh.txt  fj.txt  fl.txt  fn.txt  fp.txt  fr.txt  ft.txt  fv.txt  fx.txt  fz.txt
fB.txt  fD.txt  fF.txt  fH.txt  fJ.txt  fL.txt  fN.txt  fP.txt  fR.txt  fT.txt  fV.txt  fX.txt  fZ.txt
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ls f[a-d].txt</span>
fa.txt  fA.txt  fb.txt  fB.txt  fc.txt  fC.txt  fd.txt
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ls f[A-D].txt</span>
fA.txt  fb.txt  fB.txt  fc.txt  fC.txt  fd.txt  fD.txt

<span class="token comment">##显示某个目录下的隐藏文件，而不显示其它文件</span>
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ls -d /etc/.*</span>
/etc/.  /etc/<span class="token punctuation">..</span>  /etc/.pwd.lock  /etc/.updated

<span class="token comment">## *用在文件名中，怎么调用带有*的文件</span>
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># touch file*.log</span>
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># touch file1.log</span>
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ls file*.log</span>
file1.log  file*.log
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ls 'file*.log'</span>
file*.log
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p><strong>Linux系统中还有预定义的字符类</strong>：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>:digit:<span class="token punctuation">]</span>：任意数字，相当于0-9
<span class="token punctuation">[</span>:lower:<span class="token punctuation">]</span>：任意小写字母，表示a-z
<span class="token punctuation">[</span>:upper:<span class="token punctuation">]</span>：任意大写字母，表示A-Z
<span class="token punctuation">[</span>:alpha:<span class="token punctuation">]</span>：任意大小写字母
<span class="token punctuation">[</span>:alnum:<span class="token punctuation">]</span>：任意数字或字母
<span class="token punctuation">[</span>:blank:<span class="token punctuation">]</span>：水平空白字符
<span class="token punctuation">[</span>:space:<span class="token punctuation">]</span>：水平或垂直空白字符
<span class="token punctuation">[</span>:punct:<span class="token punctuation">]</span>：标点符号
<span class="token punctuation">[</span>:print:<span class="token punctuation">]</span>：可打印字符
<span class="token punctuation">[</span>:cntrl:<span class="token punctuation">]</span>：控制（非打印）字符
<span class="token punctuation">[</span>:graph:<span class="token punctuation">]</span>：图形字符
<span class="token punctuation">[</span>:xdigit:<span class="token punctuation">]</span>：十六进制字符
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">##使用预定义字符要在外面再加一层[]</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls f[[:lower:]].txt</span>
fa.txt  fc.txt  fe.txt  fg.txt  fi.txt  fk.txt  fm.txt  fo.txt  fq.txt  fs.txt  fu.txt  fw.txt  fy.txt
fb.txt  fd.txt  ff.txt  fh.txt  fj.txt  fl.txt  fn.txt  fp.txt  fr.txt  ft.txt  fv.txt  fx.txt  fz.txt
<span class="token comment">##如果不加[]，就是常见的通配符，效果就不一样了</span>
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ls f[:lower:].txt</span>
fe.txt  fl.txt  fo.txt  fr.txt  fw.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>👉举例：</p> <ol><li>显示<code>/etc</code>目录下所有以<code>l</code>开头，以一个小写字母结尾，且中间出现至少一位数字的文件或目录列表</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls -d /etc/l*[[:digit:]]*[[:lower:]]</span>
/etc/l1e.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li>显示<code>/etc</code>目录下以任意一位数字开头，且以非数字结尾的文件或目录列表</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls -d /etc/[[:digit:]]*[^[:digit:]]</span>
/etc/3q.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="3"><li>显示<code>/etc</code>目录下以非字母开头，后面跟了一个字母及其它任意长度任意字符的文件或目录列表</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls -d /etc/[^[:alpha:]][[:alpha:]]*</span>
/etc/3q.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="4"><li>显示<code>/etc</code>目录下所有以<code>rc</code>开头，并后面是0-6之间的数字，其它为任意字符的文件或目录列表</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls -d /etc/rc[0-6]*</span>
/etc/rc0.d  /etc/rc2.d  /etc/rc4.d  /etc/rc6.d
/etc/rc1.d  /etc/rc3.d  /etc/rc5.d
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="5"><li>显示<code>/etc</code>目录下，所有<code>.conf</code>结尾，且以<code>m,n,r,p</code>开头的文件或目录列表</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls -d /etc/[mnrp]*.conf</span>
/etc/man_db.conf  /etc/nsswitch.conf  /etc/rsyslog.conf
/etc/mke2fs.conf  /etc/resolv.conf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="6"><li>只显示<code>/root</code>下的隐藏文件和目录</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls -d /root/.*</span>
/root/.              /root/.bash_logout   /root/.cshrc    /root/.txt
/root/<span class="token punctuation">..</span>             /root/.bash_profile  /root/.lesshst
/root/.bash_history  /root/.bashrc        /root/.tcshrc
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="7"><li>只显示<code>/etc</code>下的非隐藏目录列表</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls -d /etc/[^.]*</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></blockquote> <h3 id="创建空文件和刷新时间"><a href="#创建空文件和刷新时间" class="header-anchor">#</a> 创建空文件和刷新时间</h3> <h4 id="🧩touch"><a href="#🧩touch" class="header-anchor">#</a> 🧩touch</h4> <p><code>touch</code>命令可以用来创建空文件或刷新文件的时间</p> <p>📍<strong>命令格式</strong>：</p> <div class="language-http line-numbers-mode"><pre class="language-http"><code>touch [OPTION]...FILE...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>常用选项</strong>：</p> <ul><li>-a ： 仅改变atime和ctime</li> <li>-m ： 仅改变mtime和ctime</li> <li>-t ： [[CC]YY]MMDDhhmm[.ss] ，指定atime和mtime的时间戳</li> <li>-c ： 如果文件不存在，则不予创建</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">##touch用来刷新时间</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ll /etc/issue</span>
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">23</span> Oct <span class="token number">23</span>  <span class="token number">2020</span> /etc/issue
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># touch /etc/issue</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ll /etc/issue</span>
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">23</span> Apr <span class="token number">15</span> <span class="token number">17</span>:13 /etc/issue

<span class="token comment">##用touch或者 &gt; 都能创建空文件（ &gt;不建议用，容易破坏现有文件 ）</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># touch 1.txt</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># &gt; 2.txt</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls</span>
<span class="token number">1</span>.txt  <span class="token number">2</span>.txt
<span class="token comment">##但是 &gt; 后面跟的是已存在的文件，那么这个文件会被清空</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># &gt; /etc/issue</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ll /etc/issue</span>
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">0</span> Apr <span class="token number">15</span> <span class="token number">17</span>:27 /etc/issue
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="复制文件和目录"><a href="#复制文件和目录" class="header-anchor">#</a> 复制文件和目录</h3> <h4 id="🧩cp"><a href="#🧩cp" class="header-anchor">#</a> 🧩cp</h4> <p><code>cp</code>命令可以实现文件或目录的复制</p> <p>📍<strong>命令格式</strong>：</p> <div class="language-http line-numbers-mode"><pre class="language-http"><code>cp [OPTION]... [-T] SOURCE DEST
cp [OPTION]... SOURCE... DIRECTORY
cp [OPTION]... -t DIRECTORY SOURCE...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>常用选项</strong>：</p> <ul><li><p>-i ： 如果目标已存在，覆盖前提示是否覆盖</p></li> <li><p>-n ： 不覆盖，注意两者顺序</p></li> <li><p>-r，-R ： 递归复制目录及内部的所有内容</p></li> <li><p>-a ： 归档，相当于-dR --preserv=all，常用于备份功能，<strong>保留所有属性</strong></p></li> <li><p>-d ： --no-dereference --preserv=links，不复制原文件，只复制链接名</p></li> <li><p>--preserv[=ATTR_LIST]</p> <p>mode：权限</p> <p>ownership：属主属组</p> <p>timestamp</p> <p>links</p> <p>xattr</p> <p>context</p> <p>all</p></li> <li><p>-p ： 等同--preserv=mode,ownership,timestamp</p></li> <li><p>-v ： --verbose，备份过程可见</p></li> <li><p>-f ： force</p></li> <li><p>-u ： --update只复制源比目标更新文件或目标不存在的文件</p></li> <li><p>-b ： 目标存在，覆盖前先备份，默认形式为<code>filename~</code>，只保留最近的一个备份</p></li> <li><p>--backup=numbered ：目标存在，覆盖前先备份加数字后缀，形式为<code>filename.~#~</code> ，可以保留多个版本</p></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>peggie@centos ~<span class="token punctuation">]</span><span class="token comment"># touch pig.txt</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cp ~peggie/pig.txt /opt/peggie.txt.bak</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ll !* </span>
ll ~peggie/pig.txt /opt/peggie.txt.bak
-rw-rw-r-- <span class="token number">1</span> peggie peggie <span class="token number">0</span> Apr <span class="token number">15</span> <span class="token number">18</span>:07 /home/peggie/pig.txt
-rw-r--r-- <span class="token number">1</span> root   root   <span class="token number">0</span> Apr <span class="token number">15</span> <span class="token number">18</span>:08 /opt/peggie.txt.bak
<span class="token comment">##由上可看出把文件从普通用户复制到root用户下属性会改变，作为备份属性应该不变</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cp -a ~peggie/pig.txt /opt/peggie.txt.bak</span>
-rw-rw-r-- <span class="token number">1</span> peggie peggie <span class="token number">0</span> Apr <span class="token number">15</span> <span class="token number">18</span>:13 /home/peggie/pig.txt
-rw-rw-r-- <span class="token number">1</span> root   root   <span class="token number">0</span> Apr <span class="token number">15</span> <span class="token number">18</span>:14 /opt/peggie.txt.bak


<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ll /etc/grub2.cfg </span>
lrwxrwxrwx. <span class="token number">1</span> root root <span class="token number">22</span> Apr  <span class="token number">1</span> <span class="token number">16</span>:18 /etc/grub2.cfg -<span class="token operator">&gt;</span> <span class="token punctuation">..</span>/boot/grub2/grub.cfg
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cp !* /opt/</span>
<span class="token function">cp</span> /etc/grub2.cfg /opt/
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ll /opt/grub2.cfg </span>
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">4207</span> Apr <span class="token number">15</span> <span class="token number">18</span>:31 /opt/grub2.cfg
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ll /boot/grub2/grub.cfg </span>
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">4207</span> Apr  <span class="token number">1</span> <span class="token number">16</span>:20 /boot/grub2/grub.cfg
<span class="token comment">##由上可看出链接文件拷贝到别处是将链接文件指向的源文件拷贝过去，丢失了链接文件的属性</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cp -d /etc/grub2.cfg /opt/ </span>
cp: overwrite ‘/opt/grub2.cfg’? y
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ll /opt/grub2.cfg </span>
lrwxrwxrwx. <span class="token number">1</span> root root <span class="token number">22</span> Apr <span class="token number">15</span> <span class="token number">18</span>:43 /opt/grub2.cfg -<span class="token operator">&gt;</span> <span class="token punctuation">..</span>/boot/grub2/grub.cfg


<span class="token comment">##重复两次将某个目录递归拷贝到其它目录下</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cp -r /etc /opt/etc-bak</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls /opt</span>
etc-bak
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cp -r /etc /opt/etc-bak</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls /opt/etc-bak</span>
<span class="token punctuation">..</span>. <span class="token punctuation">..</span>. <span class="token punctuation">..</span>.
<span class="token punctuation">..</span>. etc <span class="token punctuation">..</span>.
<span class="token punctuation">..</span>. <span class="token punctuation">..</span>. <span class="token punctuation">..</span>.
<span class="token comment">##该目录会成为拷贝后目录的子目录，所以cp命令不具有幂等性</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cp -r /etc/ /opt/etc-bak</span>
cp: overwrite ‘/opt/etc-bak/etc/fstab’? y
cp: overwrite ‘/opt/etc-bak/etc/crypttab’? y
cp: overwrite ‘/opt/etc-bak/etc/mtab’? y
cp: overwrite ‘/opt/etc-bak/etc/resolv.conf’? ^C
<span class="token comment">##第三次重复同一个命令，则会询问是否覆盖文件</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># alias cp</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">cp</span><span class="token operator">=</span><span class="token string">'cp -i'</span>
<span class="token comment">##cp命令其实是别名，本质是cp -i，不想询问而直接覆盖则执行下面命令</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># \cp -r /etc/ /opt/etc-bak</span>


<span class="token comment">##如果将两个文件同样备份到一个文件中，新的内容那个会覆盖掉旧的内容</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cp /etc/issue issue.bak</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cp /etc/issue issue.bak</span>
cp: overwrite <span class="token string">'issue.bak'</span>?
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cp /etc/passwd issue.bak</span>
cp: overwrite <span class="token string">'issue.bak'</span>?
<span class="token comment">##加了-b选项就会将旧的内容先进行备份，再将新的内容覆盖掉旧的内容</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cp -b /etc/passwd issue.bak</span>
cp: overwrite <span class="token string">'issue.bak'</span>? y
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls</span>
issue.bak issue.bak-
<span class="token comment">##多个文件备份到同一个文件，要进行多个版本的备份</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cp --backup=numbered /etc/centos-release issue.bak</span>
cp: overwrite <span class="token string">'issue.bak'</span>? y
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls</span>
issue.bak issue.bak- issue.bak.~1~

<span class="token comment">##将管道文件进行拷贝</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ll /dev/zero</span>
crw-rw-rw-  <span class="token number">1</span> root root <span class="token number">1</span>, <span class="token number">5</span> Apr <span class="token number">14</span> <span class="token number">13</span>:17 /dev/zero
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cp /dev/zero /opt/zero.bak</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ll -h !*</span>
ll -h /dev/zero /opt/zero.bak
crw-rw-rw-  <span class="token number">1</span> root root <span class="token number">1</span>, <span class="token number">5</span> Apr <span class="token number">14</span> <span class="token number">13</span>:17 /dev/zero
-rw-r--r--  <span class="token number">1</span> root root 330M Apr <span class="token number">14</span> <span class="token number">13</span>:18 /opt/zero.bak
<span class="token comment">##最后会形成一个里面全是零的330M的普通文件，如果想不改变属性就要加-a</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br></div></div><table><thead><tr><th>源\目标</th> <th>不存在</th> <th>存在且为文件</th> <th>存在且为目录</th></tr></thead> <tbody><tr><td>一个文件</td> <td>新建DEST，并将SRC中内容填充至DEST中</td> <td>将SRC中的内容覆盖至DEST中 注意数据丢失风险！ 建议用 –i 选项</td> <td>在DEST下新建与原文件同名的文件，并将SRC中内容填充至新文件中</td></tr> <tr><td>多个文件</td> <td>提示错误</td> <td>提示错误</td> <td>在DEST下新建与原文件同名的文件，并将原文件内容复制进新文件中</td></tr> <tr><td>目录须使用-r选项</td> <td>创建指定DEST同名目录，复制SRC目录中所有文件至DEST下</td> <td>提示错误</td> <td>在DEST下新建与原目录同名的目录，并将SRC中内容复制至新目录中</td></tr></tbody></table> <blockquote><p>👉举例：</p> <ol><li>每天将<code>/etc</code>目录下所有文件，备份到<code>/data</code>独立的子目录下，并要求子目录格式<code>backupYYYY-mm-dd</code>，备份过程可见</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cp -av /etc/ /data/backup`date +%F`</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>创建<code>/data/rootdir</code>目录，并复制<code>/root</code>下所有文件到该目录内，要求保留原有权限</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cp -a /root /data/rootdir</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></blockquote> <h3 id="移动和重命名文件"><a href="#移动和重命名文件" class="header-anchor">#</a> 移动和重命名文件</h3> <h4 id="🧩mv"><a href="#🧩mv" class="header-anchor">#</a> 🧩mv</h4> <p><code>mv</code>命令可以实现文件或目录的移动和改名。</p> <ul><li>同一分区移动数据，速度很快：数据位置没有变化</li> <li>不同分区移动数据，速度相对较慢：数据位置发生了变化</li></ul> <p>📍<strong>命令格式</strong>：</p> <div class="language-http line-numbers-mode"><pre class="language-http"><code>mv [OPTION]... [-T] SOURCE DEST
mv [OPTION]... SOURCE... DIRECTORY
mv [OPTION]... -t DIRECTORY SOURCE...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>常用选项</strong>：</p> <ul><li>-i ： 交互式</li> <li>-f ： 强制</li> <li>-b ： 目标存在，覆盖前先备份</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># touch nginx.conf</span>
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ls </span>
nginx.conf
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># mv nginx.conf{,.bak}</span>
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ls </span>
nginx.conf.bak
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># echo nginx.conf{,.bak}</span>
nginx.conf nginx.conf.bak
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="🧩rename"><a href="#🧩rename" class="header-anchor">#</a> 🧩rename</h4> <p><code>rename</code>命令可以批量修改文件名。</p> <p>📍命令格式：</p> <div class="language-http line-numbers-mode"><pre class="language-http"><code>rename [OPTIONS] &lt;expression&gt; &lt;replacement&gt; &lt;file&gt;...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>为所有的<code>txt</code>文件加上<code>.bak</code>后缀</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># rename txt txt.bak *.txt</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>去掉所有的<code>bak</code>后缀</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># rename .bak '' *.bak</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="删除文件"><a href="#删除文件" class="header-anchor">#</a> 删除文件</h3> <h4 id="🧩rm"><a href="#🧩rm" class="header-anchor">#</a> 🧩rm</h4> <p>🔍<code>rm</code>命令可以删除文件。注意：此命令非常危险，慎重使用，建议使用<code>mv</code>代替<code>rm</code></p> <p>📍<strong>命令格式</strong>：</p> <div class="language-http line-numbers-mode"><pre class="language-http"><code>rm [OPTION]... FILE...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>常用选项</strong>：</p> <ul><li>-i ： 交互式</li> <li>-f ： 强制删除</li> <li>-r ： 递归</li> <li>--no-preserve-root 删除/ （删除根目录）</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># rm -rf /</span>
rm: it is dangerous to operate recursively on <span class="token string">'/'</span>
rm: use --no-preserve-root to override this failsafe
<span class="token comment">##从CentOS 6以后系统就不允许用上面命令直接删除根目录，真正删除根目录要使用下面这条命令</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># rm -rf --no-preserve-root /</span>

<span class="token comment">##执行删除根目录的命令但是虚拟机内仍有东西无法删除，比如：</span>
<span class="token punctuation">[</span>root@centos /<span class="token punctuation">]</span><span class="token comment"># echo *</span>
boot data dev misc net proc run sys
（但是这些目录里面都是空的）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code>👉举例：删除特殊文件
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># touch ./-f                                       ##创建特殊文件</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls</span>
annaconda.ks.cfg   -f
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># rm -f -f                                         ##这样无法直接删除</span>
✔正确方法：
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># rm -- -f</span>
rm: remove regular empty <span class="token function">file</span> <span class="token string">'-f'</span>? y

<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># rm --help</span>
To remove a <span class="token function">file</span> whose name starts with a <span class="token string">'-'</span>, <span class="token keyword">for</span> example <span class="token string">'-foo'</span>,
use one of these commands:
  <span class="token function">rm</span> -- -foo

  <span class="token function">rm</span> ./-foo

<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># touch '~' </span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># rm -- ~                                          ##这时用上面的方法不管用了</span>
rm: cannot remove ‘/root’: Is a directory
✔正确方法：
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># rm -f ./~</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><blockquote><p>🔥生产案例：提示空间快满，使用rm删除了很大的无用文件后，df仍然看见空间不足，该如何解决？</p> <p><img src="https://raw.githubusercontent.com/frksb/blogImage/main/202205172031415.png" alt="image-20220416222304114"></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>👉举例：正确删除大的文件并释放空间
①查找删除的大文件
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># lsof | grep delete</span>
②清空该文件
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># &gt; /boot/bigfile.img                              ##(这个写法不通用，比如cshell不支持)</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cat /dev/null &gt; /boot/bigfile.img                ##(这个写法通用)</span>
③删除该文件
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># rm -f /boot/bigfile.img</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></blockquote> <h4 id="🧩shred"><a href="#🧩shred" class="header-anchor">#</a> 🧩shred</h4> <p><code>rm</code>虽然删除了文件，但是被删除的文件仍然可能被恢复，在安全要求较高的场景下，可以<strong>使用<code>shred</code>安全删除文件</strong></p> <p>📍<strong>命令格式</strong>：</p> <div class="language-http line-numbers-mode"><pre class="language-http"><code>shred [OPTION]... FILE...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>常用选项</strong>：</p> <ul><li>-z ： 最后一次覆盖添加0，以隐藏覆盖操作</li> <li>-v ： 能够显示操作进度</li> <li>-u ： 覆盖后截断并删除文件</li> <li>-n # ： 指定覆盖文件内容的次数，默认值是3次</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># shred -zvun 5 1.txt </span>
shred: <span class="token number">1</span>.txt: pass <span class="token number">1</span>/6 <span class="token punctuation">(</span>random<span class="token punctuation">)</span><span class="token punctuation">..</span>.
shred: <span class="token number">1</span>.txt: pass <span class="token number">2</span>/6 <span class="token punctuation">(</span>ffffff<span class="token punctuation">)</span><span class="token punctuation">..</span>.
shred: <span class="token number">1</span>.txt: pass <span class="token number">3</span>/6 <span class="token punctuation">(</span>random<span class="token punctuation">)</span><span class="token punctuation">..</span>.
shred: <span class="token number">1</span>.txt: pass <span class="token number">4</span>/6 <span class="token punctuation">(</span>000000<span class="token punctuation">)</span><span class="token punctuation">..</span>.
shred: <span class="token number">1</span>.txt: pass <span class="token number">5</span>/6 <span class="token punctuation">(</span>random<span class="token punctuation">)</span><span class="token punctuation">..</span>.
shred: <span class="token number">1</span>.txt: pass <span class="token number">6</span>/6 <span class="token punctuation">(</span>000000<span class="token punctuation">)</span><span class="token punctuation">..</span>.
shred: <span class="token number">1</span>.txt: removing
shred: <span class="token number">1</span>.txt: renamed to 00000
shred: 00000: renamed to 0000
shred: 0000: renamed to 000
shred: 000: renamed to 00
shred: 00: renamed to <span class="token number">0</span>
shred: <span class="token number">1</span>.txt: removed
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="目录操作"><a href="#目录操作" class="header-anchor">#</a> 目录操作</h3> <h4 id="🧩显示目录树tree"><a href="#🧩显示目录树tree" class="header-anchor">#</a> 🧩显示目录树tree</h4> <p><strong>常用选项</strong>：</p> <ul><li>-d ： 只显示目录</li> <li>-L level ： 指定显示的层级数目</li> <li>-P pattern ： 只显示指定wild-card pattern匹配到的路径</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># tree -d /boot/</span>
/boot/
├── efi
│   └── EFI
│       └── centos
├── grub
├── grub2
│   ├── fonts
│   ├── i386-pc
│   └── locale
└── lost+found

<span class="token number">9</span> directories
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="🧩创建目录mkdir"><a href="#🧩创建目录mkdir" class="header-anchor">#</a> 🧩创建目录mkdir</h4> <p><strong>常用选项</strong>：</p> <ul><li>-p ： 存在于不报错，且可自动创建所需的各目录</li> <li>-v ： 显示详细信息</li> <li>-m MODE ： 创建目录时直接指定权限</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># mkdir /data/dir1/dir2/dir3/dir4</span>
mkdir: cannot create directory ‘/data/dir1/dir2/dir3/dir4’: No such <span class="token function">file</span> or directory
<span class="token comment">##不加参数的情况下，无法在不存在的目录下创建多级目录</span>
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># mkdir -pv /data/dir1/dir2/dir3/dir4</span>
mkdir: created directory ‘/data/dir1’
mkdir: created directory ‘/data/dir1/dir2’
mkdir: created directory ‘/data/dir1/dir2/dir3’
mkdir: created directory ‘/data/dir1/dir2/dir3/dir4’
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># tree</span>
<span class="token builtin class-name">.</span>
├── dir1
│   └── dir1
│       └── dir3
│           └── dir4
└── nginx.conf.bak

<span class="token number">4</span> directories, <span class="token number">1</span> <span class="token function">file</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><blockquote><p>👇举例：</p> <ol><li>如何创建<code>/testdir/dir1/x</code>,<code>/testdir/dir1/y</code>, <code>/testdir/dir1/x/a</code>,<code>/testdir/dir1/x/b</code>,<code>/testdir/dir1/y/a</code>,<code>/testdir/dir1/y/b</code></li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># mkdir -pv /data/testdir/dir1/{x,y}/{a,b} </span>
mkdir: created directory ‘/data/testdir’
mkdir: created directory ‘/data/testdir/dir1’
mkdir: created directory ‘/data/testdir/dir1/x’
mkdir: created directory ‘/data/testdir/dir1/x/a’
mkdir: created directory ‘/data/testdir/dir1/x/b’
mkdir: created directory ‘/data/testdir/dir1/y’
mkdir: created directory ‘/data/testdir/dir1/y/a’
mkdir: created directory ‘/data/testdir/dir1/y/b’
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ol start="2"><li>如何创建<code>/testdir/dir2/x</code>, <code>/testdir/dir2/y</code>, <code>/testdir/dir2/x/a</code>, <code>/testdir/dir2/x/b</code></li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># mkdir -pv /data/testdir/dir2/{x/{a,b},y}</span>
mkdir: created directory ‘/data/testdir’
mkdir: created directory ‘/data/testdir/dir2’
mkdir: created directory ‘/data/testdir/dir2/x’
mkdir: created directory ‘/data/testdir/dir2/x/a’
mkdir: created directory ‘/data/testdir/dir2/x/b’
mkdir: created directory ‘/data/testdir/dir2/y’
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="3"><li>如何创建<code>/testdir/dir3</code>,<code>/testdir/dir4</code>,<code>/testdir/testdir5</code>,<code>/testdir/dir5/dir6</code>, <code>/testdir/dir5/dir7</code></li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># mkdir -pv /data/testdir/dir{3,4,5/dir{6,7}}</span>
mkdir: created directory ‘/data/testdir’
mkdir: created directory ‘/data/testdir/dir3’
mkdir: created directory ‘/data/testdir/dir4’
mkdir: created directory ‘/data/testdir/dir5’
mkdir: created directory ‘/data/testdir/dir5/dir6’
mkdir: created directory ‘/data/testdir/dir5/dir7’
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></blockquote> <h4 id="🧩删除空目录rmdir"><a href="#🧩删除空目录rmdir" class="header-anchor">#</a> 🧩删除空目录rmdir</h4> <p><strong>常用选项</strong>：</p> <ul><li>-p ： 递归删除父空目录</li> <li>-v ： 显示详细信息</li></ul> <blockquote><p>❗❗注意：<code>rmdir</code>只能删除<strong>空目录</strong>（不常用）。如果想删除非空目录，可以使用<code>rm -r</code>命令，递归删除目录树</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># rmdir /data/dir1/dir2</span>
rmdir: failed to remove ‘/data/dir1/dir2’: Directory not empty
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>​    👆<code>/dir2</code>里面有<code>/dir3</code>，不属于空目录，所以无法删除<code>/dir2</code></p></blockquote> <h2 id="📌文件元数据和节点表结构"><a href="#📌文件元数据和节点表结构" class="header-anchor">#</a> 📌文件元数据和节点表结构</h2> <h3 id="inode表结构"><a href="#inode表结构" class="header-anchor">#</a> inode表结构</h3> <p>每个文件的属性信息，比如：文件的大小，时间，类型等，称为文件的元数据(meta data)。此<strong>元数据是存放在inode（index node）表中</strong>。inode表中有很多条记录组成，第一条记录对应存放了一个文件的元数据信息。</p> <p>每一个inode表记录对应的保存了以下信息：</p> <ul><li>inode number  节点号</li> <li>文件类型</li> <li>mode  权限</li> <li>UID</li> <li>GID</li> <li>链接数（指向这个文件名路径名称个数）</li> <li>timestamps  该文件的大小和不同的时间戳</li> <li>指向磁盘上文件的数据块指针</li> <li>有关文件的其他数据</li></ul> <img src="https://raw.githubusercontent.com/frksb/blogImage/main/202205172032454.png" alt="image-20220417151734059" style="zoom:80%;"> <img src="https://raw.githubusercontent.com/frksb/blogImage/main/202205172033569.png" alt="image-20220417151754137" style="zoom:80%;"> <p><strong>查看节点号</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ls -i</span>
<span class="token number">100665152</span> testdir
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>节点号在每个磁盘分区是独立分配的，相当于不同国家的身份证号，即使相同也代表不同的身份</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ls -i</span>
<span class="token number">132</span> a.txt <span class="token number">133</span> b.txt <span class="token number">131</span> mysql
<span class="token punctuation">[</span>root@centos boot<span class="token punctuation">]</span><span class="token comment"># ls -i</span>
<span class="token number">131</span> efi <span class="token number">132</span> loader <span class="token number">133</span> vmlinux-4.18.0-240.el8.x86_64
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>查看各个分区节点号的分配情况</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># df -i</span>
Filesystem       Inodes IUsed    IFree IUse% Mounted on
devtmpfs         <span class="token number">250746</span>   <span class="token number">387</span>   <span class="token number">250359</span>    <span class="token number">1</span>% /dev
tmpfs            <span class="token number">253486</span>     <span class="token number">1</span>   <span class="token number">253485</span>    <span class="token number">1</span>% /dev/shm
tmpfs            <span class="token number">253486</span>   <span class="token number">708</span>   <span class="token number">252778</span>    <span class="token number">1</span>% /run
tmpfs            <span class="token number">253486</span>    <span class="token number">16</span>   <span class="token number">253470</span>    <span class="token number">1</span>% /sys/fs/cgroup
/dev/sda2      <span class="token number">52428800</span> <span class="token number">36894</span> <span class="token number">52391906</span>    <span class="token number">1</span>% /
/dev/sda3      <span class="token number">26214400</span>     <span class="token number">9</span> <span class="token number">26214391</span>    <span class="token number">1</span>% /data
/dev/sda1         <span class="token number">65536</span>   <span class="token number">334</span>    <span class="token number">65202</span>    <span class="token number">1</span>% /boot
tmpfs            <span class="token number">253486</span>     <span class="token number">1</span>   <span class="token number">253485</span>    <span class="token number">1</span>% /run/user/0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p>🔥生产案例：提示空间已满 <code>No space left on device</code>，但 <code>df</code> 命令可以看到空间很多，为什么？</p> <p>❗❗<strong>原因：节点号被用完了！！！！！</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos boot<span class="token punctuation">]</span><span class="token comment"># df -i</span>
Filesystem       Inodes IUsed    IFree IUse% Mounted on
devtmpfs         <span class="token number">250746</span>   <span class="token number">387</span>   <span class="token number">250359</span>    <span class="token number">1</span>% /dev
tmpfs            <span class="token number">253486</span>     <span class="token number">1</span>   <span class="token number">253485</span>    <span class="token number">1</span>% /dev/shm
tmpfs            <span class="token number">253486</span>   <span class="token number">708</span>   <span class="token number">252778</span>    <span class="token number">1</span>% /run
tmpfs            <span class="token number">253486</span>    <span class="token number">16</span>   <span class="token number">253470</span>    <span class="token number">1</span>% /sys/fs/cgroup
/dev/sda2      <span class="token number">52428800</span> <span class="token number">36894</span> <span class="token number">52391906</span>    <span class="token number">1</span>% /
/dev/sda3      <span class="token number">26214400</span>     <span class="token number">9</span> <span class="token number">26214391</span>    <span class="token number">1</span>% /data
/dev/sda1         <span class="token number">65536</span> <span class="token number">65536</span>        <span class="token number">0</span>  <span class="token number">100</span>% /boot
tmpfs            <span class="token number">253486</span>     <span class="token number">1</span>   <span class="token number">253485</span>    <span class="token number">1</span>% /run/user/0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>由上图可看出，<code>/boot</code>分区下已经没有空余的节点号，当我们再次创建文件时，会报错，但是报的是空间不足的错误：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos boot<span class="token punctuation">]</span><span class="token comment"># touch b.txt</span>
touch: cannot <span class="token function">touch</span> <span class="token string">'b.txt'</span><span class="token builtin class-name">:</span> No space left on device
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>然而我们通过<code>df</code>命令查看空间是否不足时，发现<code>/boot</code>分区实际上还有空余的空间</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos boot<span class="token punctuation">]</span><span class="token comment"># df</span>
Filesystem     1K-blocks    Used Available Use% Mounted on
devtmpfs         <span class="token number">1002984</span>       <span class="token number">0</span>   <span class="token number">1002984</span>   <span class="token number">0</span>% /dev
tmpfs            <span class="token number">1013944</span>       <span class="token number">0</span>   <span class="token number">1013944</span>   <span class="token number">0</span>% /dev/shm
tmpfs            <span class="token number">1013944</span>    <span class="token number">9720</span>   <span class="token number">1004224</span>   <span class="token number">1</span>% /run
tmpfs            <span class="token number">1013944</span>       <span class="token number">0</span>   <span class="token number">1013944</span>   <span class="token number">0</span>% /sys/fs/cgroup
/dev/sda2      <span class="token number">104806400</span> <span class="token number">1529668</span> <span class="token number">103276732</span>   <span class="token number">2</span>% /
/dev/sda3       <span class="token number">52403200</span>   <span class="token number">33088</span>  <span class="token number">52370112</span>   <span class="token number">1</span>% /data
/dev/sda1        <span class="token number">1038336</span>  <span class="token number">470092</span>    <span class="token number">568244</span>  <span class="token number">46</span>% /boot
tmpfs             <span class="token number">202792</span>       <span class="token number">0</span>    <span class="token number">202792</span>   <span class="token number">0</span>% /run/user/0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></blockquote> <p><strong>目录</strong></p> <p>目录是个特殊文件，目录文件的内容保存了此目录中文件的列表及inode number对应关系</p> <ul><li>文件引用一个是inode号</li> <li>人是通过文件名来引用一个文件</li> <li>一个目录是目录下的文件名和文件inode号之间的映射</li></ul> <p><strong>inode表和目录</strong></p> <img src="https://raw.githubusercontent.com/frksb/blogImage/main/202205172033323.png" alt="image-20220417155707878" style="zoom:80%;"> <p><strong>cp和inode</strong></p> <p>cp命令：</p> <ul><li>分配一个空闲的inode号，在inode表中生成新条目</li> <li>在目录中创建一个目录项，将名称与inode编号关联</li> <li>拷贝数据生成新的文件</li></ul> <p><strong>rm和inode</strong></p> <p>rm 命令：</p> <ul><li>链接数递减，从而释放的inode号可以被重用</li> <li>把数据块放在空闲列表中</li> <li>删除目录项</li> <li>数据实际上不会马上被删除，但当另一个文件使用数据块时将被覆盖</li></ul> <p><strong>mv和inode</strong></p> <ol><li>如果mv命令的目标和源在相同的文件系统，作为mv命令</li></ol> <ul><li>用新的文件名创建对应新的目录项</li> <li>删除旧目录条目对应的旧的文件名</li> <li>不影响inode表(除时间戳)或磁盘上的数据位置：没有数据被移动！</li></ul> <ol start="2"><li>如果目标和源在一个不同的文件系统，mv相当于cp和rm</li></ol> <h3 id="硬链接"><a href="#硬链接" class="header-anchor">#</a> 硬链接</h3> <p>硬链接本质上就给一个文件起一个新的名称，实质是同一个文件。</p> <p>📍<strong>命令格式</strong>：</p> <div class="language-http line-numbers-mode"><pre class="language-http"><code>ln filename [linkname]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>硬链接的特性：</p> <ul><li>创建硬链接会在对应的目录中增加额外的记录项以引用文件</li> <li>对应于同一文件系统上一个物理文件</li> <li>每个目录引用相同的inode号</li> <li>创建时链接数递增</li> <li>删除文件时：rm命令递减计数的链接，文件要存在，至少有一个链接数。当链接数为零时，该文件被删除</li> <li>不能跨越驱动器或分区</li> <li>不支持对目录创建硬链接</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># cp /etc/fstab dir/f1.txt </span>
cp: overwrite ‘dir/f1.txt’? y
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ln dir/f1.txt /data/f1-.txt                      ##创建硬链接</span>
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ll -i dir/f1.txt /data/f1-.txt                   ##前面的‘2’就是链接数，可以看出，两个文件除了路径不同其余都相同</span>
<span class="token number">33555970</span> -rw-r--r--. <span class="token number">2</span> root root <span class="token number">376</span> Apr <span class="token number">17</span> <span class="token number">21</span>:30 /data/f1-.txt
<span class="token number">33555970</span> -rw-r--r--. <span class="token number">2</span> root root <span class="token number">376</span> Apr <span class="token number">17</span> <span class="token number">21</span>:30 dir/f1.txt
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># cat dir/f1.txt                                   ##对原文件进行修改</span>
<span class="token assign-left variable">UUID</span><span class="token operator">=</span>1c322ae1-e3a7-4e4e-907a-1fce5623fe50 /                       xfs     defaults        <span class="token number">0</span> <span class="token number">0</span>
<span class="token assign-left variable">UUID</span><span class="token operator">=</span>b022c448-65b6-43a2-8cf6-815b2dc96b05 /boot                   ext4    defaults        <span class="token number">1</span> <span class="token number">2</span>
<span class="token assign-left variable">UUID</span><span class="token operator">=</span>432e4c52-bcdf-4716-af21-50423b8690f9 /data                   xfs     defaults        <span class="token number">0</span> <span class="token number">0</span>
<span class="token assign-left variable">UUID</span><span class="token operator">=</span>10fd3e22-f1c0-4d1b-9f03-1dc343a796d2 swap                    swap    defaults        <span class="token number">0</span> <span class="token number">0</span>
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># cat /data/f1-.txt                                 ##因为是同一个文件，所以会同步内容</span>
<span class="token assign-left variable">UUID</span><span class="token operator">=</span>1c322ae1-e3a7-4e4e-907a-1fce5623fe50 /                       xfs     defaults        <span class="token number">0</span> <span class="token number">0</span>
<span class="token assign-left variable">UUID</span><span class="token operator">=</span>b022c448-65b6-43a2-8cf6-815b2dc96b05 /boot                   ext4    defaults        <span class="token number">1</span> <span class="token number">2</span>
<span class="token assign-left variable">UUID</span><span class="token operator">=</span>432e4c52-bcdf-4716-af21-50423b8690f9 /data                   xfs     defaults        <span class="token number">0</span> <span class="token number">0</span>
<span class="token assign-left variable">UUID</span><span class="token operator">=</span>10fd3e22-f1c0-4d1b-9f03-1dc343a796d2 swap                    swap    defaults        <span class="token number">0</span> <span class="token number">0</span>

<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ln dir/f1.txt /opt/f11.txt</span>
ln: failed to create hard <span class="token function">link</span> ‘/opt/f11.txt’ <span class="token operator">=</span><span class="token operator">&gt;</span> ‘dir/f1.txt’: Invalid cross-device <span class="token function">link</span>
<span class="token comment">##f1.txt是在/data分区，而/opt是在/分区，不能跨分区建立硬链接</span>

<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ln /data/dir /data/dir2</span>
ln: ‘/data/dir’: hard <span class="token function">link</span> not allowed <span class="token keyword">for</span> directory
<span class="token comment">##不支持目录创建硬链接</span>

<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># rm -f /data/dir/f1.txt </span>
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># cat /data/f1-.txt                                 </span>
<span class="token assign-left variable">UUID</span><span class="token operator">=</span>1c322ae1-e3a7-4e4e-907a-1fce5623fe50 /                       xfs     defaults        <span class="token number">0</span> <span class="token number">0</span>
<span class="token assign-left variable">UUID</span><span class="token operator">=</span>b022c448-65b6-43a2-8cf6-815b2dc96b05 /boot                   ext4    defaults        <span class="token number">1</span> <span class="token number">2</span>
<span class="token assign-left variable">UUID</span><span class="token operator">=</span>432e4c52-bcdf-4716-af21-50423b8690f9 /data                   xfs     defaults        <span class="token number">0</span> <span class="token number">0</span>
<span class="token assign-left variable">UUID</span><span class="token operator">=</span>10fd3e22-f1c0-4d1b-9f03-1dc343a796d2 swap                    swap    defaults        <span class="token number">0</span> <span class="token number">0</span>
<span class="token comment">##删除了源文件，链接文件仍然存在</span>

<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ll /data/ -i</span>
<span class="token number">33555969</span> drwxr-xr-x. <span class="token number">2</span> root root   <span class="token number">6</span> Apr <span class="token number">17</span> <span class="token number">22</span>:02 <span class="token function">dir</span>
<span class="token comment">##目录不能创建硬链接，为什么/dir有2个链接数？？</span>
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ll /data/dir/ -a -i</span>
<span class="token number">33555969</span> drwxr-xr-x. <span class="token number">2</span> root root  <span class="token number">6</span> Apr <span class="token number">17</span> <span class="token number">22</span>:02 <span class="token builtin class-name">.</span>
<span class="token comment">##任何一个文件夹都有. ，所以任何一个文件夹都有2个链接数</span>
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># mkdir /data/dir/subdir</span>
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ll /data -i </span>
<span class="token number">33555969</span> drwxr-xr-x. <span class="token number">3</span> root root  <span class="token number">20</span> Apr <span class="token number">17</span> <span class="token number">22</span>:11 <span class="token function">dir</span>
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ll /data/dir/subdir/ -i -a</span>
<span class="token number">33555969</span> drwxr-xr-x. <span class="token number">3</span> root root <span class="token number">20</span> Apr <span class="token number">17</span> <span class="token number">22</span>:11 <span class="token punctuation">..</span>
<span class="token comment">##当创建了/dir的子目录/subdir，该链接数又会+1，原因是/subdir的..就是/dir</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h3 id="符号链接-软链接"><a href="#符号链接-软链接" class="header-anchor">#</a> 符号链接（软链接）</h3> <p>一个符号链接指向另一个文件，就像windows中的快捷方式，软链接文件和原文件本质上不是同一个文件</p> <p>📍<strong>命令格式</strong>：</p> <div class="language-http line-numbers-mode"><pre class="language-http"><code>ln -s filename [linkname]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>软链接的特点：</p> <ul><li>一个符号链接的内容是它引用文件的名称</li> <li>可以对目录创建软链接</li> <li>可以跨分区的文件实现</li> <li>指向的是另一个文件的路径；其大小为指向的路径字符串的长度；不增加或减少目标文件inode的引用计数</li> <li>在创建软链接时，如果源文件使用相对路径，是相对于软链接文件的路径，而非相对于当前工作目录，但是软链接的路径如果是相对路径，则是相对于当前工作目录</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ln -s /data/f1-.txt /data/dir/f1.txt</span>
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ll !*</span>
ll -s /data/f1-.txt /data/dir/f1.txt
<span class="token number">0</span> lrwxrwxrwx. <span class="token number">1</span> root root  <span class="token number">13</span> Apr <span class="token number">17</span> <span class="token number">22</span>:30 /data/dir/f1.txt -<span class="token operator">&gt;</span> /data/f1-.txt
<span class="token number">4</span> -rw-r--r--. <span class="token number">1</span> root root <span class="token number">376</span> Apr <span class="token number">17</span> <span class="token number">21</span>:30 /data/f1-.txt
<span class="token comment">##节点号不同，链接数不变，软链接的大小指的是原文件名称的字符串个数</span>

<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ln -s /data/dir /data/dir2</span>
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ll /data/dir2</span>
lrwxrwxrwx. <span class="token number">1</span> root root <span class="token number">10</span> Apr <span class="token number">17</span> <span class="token number">22</span>:36 /data/dir2 -<span class="token operator">&gt;</span> /data/dir/
<span class="token comment">##可以对目录创建软链接</span>

<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ln -s /data/f1-.txt /opt/f1.txt</span>
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ll /opt/f1.txt </span>
lrwxrwxrwx. <span class="token number">1</span> root root <span class="token number">13</span> Apr <span class="token number">17</span> <span class="token number">22</span>:39 /opt/f1.txt -<span class="token operator">&gt;</span> /data/f1-.txt
<span class="token comment">##可以跨分区的文件实现</span>

<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ln -s f1-.txt /opt/f1.txt</span>
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ll /opt/f1.txt                         ##使用相对路径创建软链接，系统会自动认为/opt为相对路径，而去/opt寻找源文件</span>
lrwxrwxrwx. <span class="token number">1</span> root root <span class="token number">13</span> Apr <span class="token number">17</span> <span class="token number">22</span>:39 /opt/f1.txt -<span class="token operator">&gt;</span>
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ln -s ../data/f1-.txt /opt/f1.txt</span>
<span class="token comment">##所以如果要创建软链接写相对路径，要写对于/opt的相对路径，而不是对于/data的相对路径</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><blockquote><p>🔥生产案例：软件的更新迭代（升级）</p> <ol><li>创建一个目录来存放app的1.0版本内容</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># mkdir app-v1.0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>创建该目录的软链接（让客户访问该软链接，其实是指向1.0版本的app）</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ln -s app-v1.0 app</span>
lrwxrwxrwx. <span class="token number">1</span> root root <span class="token number">13</span> Apr <span class="token number">17</span> <span class="token number">23</span>:39 app -<span class="token operator">&gt;</span> app-v1.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="3"><li>创建一个目录来存放app的2.0版本内容（当1.0版本舍弃使用，换用2.0版本时）</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># mkdir app-v2.0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="4"><li>删除原本的软链接，创建新的软链接（指向2.0版本的目录）</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># rm -f app</span>
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ln -s app-v2.0 app</span>
lrwxrwxrwx. <span class="token number">1</span> root root <span class="token number">13</span> Apr <span class="token number">17</span> <span class="token number">23</span>:49 app -<span class="token operator">&gt;</span> app-v2.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></blockquote> <h3 id="🔥硬链接和软链接区别总结"><a href="#🔥硬链接和软链接区别总结" class="header-anchor">#</a> 🔥硬链接和软链接区别总结</h3> <ol><li><p>本质</p> <p>硬链接：本质是同一个文件</p> <p>软链接：本质不是同一个文件</p></li> <li><p>跨设备/分区</p> <p>硬链接：不支持</p> <p>软链接：支持</p></li> <li><p>inode</p> <p>硬链接：相同</p> <p>软链接：不同</p></li> <li><p>链接数</p> <p>硬链接：创建新的硬链接，链接数会增加，删除硬链接，链接数会减少</p> <p>软链接：创建或删除，链接数都不会变化</p></li> <li><p>文件夹</p> <p>硬链接：不支持</p> <p>软链接：支持</p></li> <li><p>相对路径</p> <p>硬链接：原始文件相对路径是相对于当前工作目录</p> <p>软链接：原始文件相对路径是相对于链接文件的相对路径</p></li> <li><p>删除源文件</p> <p>硬链接：只是链接数减一，但链接文件的访问不受影响</p> <p>软链接：链接文件将无法访问</p></li> <li><p>文件类型</p> <p>硬链接：和源文件相同</p> <p>软链接：链接文件，和源文件无关</p></li> <li><p>文件大小</p> <p>硬链接：和源文件相同</p> <p>软链接：源文件的路径和长度</p></li></ol> <h2 id="📌io重定向和管道"><a href="#📌io重定向和管道" class="header-anchor">#</a> 📌IO重定向和管道</h2> <h3 id="标准输入和输出"><a href="#标准输入和输出" class="header-anchor">#</a> 标准输入和输出</h3> <p><strong>程序：指令+数据</strong></p> <ul><li><p>读入数据：Input</p></li> <li><p>输出数据：Output</p></li></ul> <p>打开的文件都有一个fd： file description（文件描述符）</p> <p>Linux给程序提供三种I/O设备：</p> <ul><li>标准输入（STDIN）       -0       默认接收来自终端窗口的输入</li> <li>标准输出（STDOUT）   -1       默认输出到终端窗口</li> <li>标准错误（STDERR）   -2       默认输出到终端窗口</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ll /dev/std*</span>
lrwxrwxrwx. <span class="token number">1</span> root root <span class="token number">15</span> Apr <span class="token number">14</span> <span class="token number">13</span>:17 /dev/stderr -<span class="token operator">&gt;</span> /proc/self/fd/2
lrwxrwxrwx. <span class="token number">1</span> root root <span class="token number">15</span> Apr <span class="token number">14</span> <span class="token number">13</span>:17 /dev/stdin -<span class="token operator">&gt;</span> /proc/self/fd/0
lrwxrwxrwx. <span class="token number">1</span> root root <span class="token number">15</span> Apr <span class="token number">14</span> <span class="token number">13</span>:17 /dev/stdout -<span class="token operator">&gt;</span> /proc/self/fd/1
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># tty</span>
/dev/pts/0
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ll /proc/self/fd/2</span>
lrwx------. <span class="token number">1</span> root root <span class="token number">64</span> Apr <span class="token number">18</span> 00:34 /proc/self/fd/2 -<span class="token operator">&gt;</span> /dev/pts/0
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ll /proc/self/fd/0</span>
lrwx------. <span class="token number">1</span> root root <span class="token number">64</span> Apr <span class="token number">18</span> 00:34 /proc/self/fd/0 -<span class="token operator">&gt;</span> /dev/pts/0
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># ll /proc/self/fd/1</span>
lrwx------. <span class="token number">1</span> root root <span class="token number">64</span> Apr <span class="token number">18</span> 00:34 /proc/self/fd/1 -<span class="token operator">&gt;</span> /dev/pts/0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="i-o重定向"><a href="#i-o重定向" class="header-anchor">#</a> I/O重定向</h3> <p>I/O重定向：将默认的输入、输出或错误对应的设备改变，指向新的目标</p> <h4 id="标准输出和错误重新定向"><a href="#标准输出和错误重新定向" class="header-anchor">#</a> 标准输出和错误重新定向</h4> <p>STDOUT和STDERR可以被重定向到指定文件，而非默认的当前终端</p> <p><strong>📍命令格式</strong>：</p> <div class="language-http line-numbers-mode"><pre class="language-http"><code>命令  操作符号  文件名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>支持的操作符号包括</strong>：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> 或 <span class="token operator">&gt;</span>     把STDOUT重定向到文件
<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>          把STDERR重定向到文件
<span class="token operator">&amp;&gt;</span>          把标准输出和错误都重定向
<span class="token operator">&gt;&amp;</span>          和上面功能一样，建议使用上面方式
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>以上如果文件已存在，文件内容会被覆盖</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">set</span> -C      禁止将内容覆盖已有文件，但可追加，利用 <span class="token operator">&gt;|</span> 仍可强制覆盖
<span class="token builtin class-name">set</span> +C      允许覆盖，默认
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">##set -C执行后，再做重定向时，重定向文件如果存在则会报错 cannot overwrite existing file</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># set -C</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># echo 'abc' &gt; 1.txt </span>
-bash: <span class="token number">1</span>.txt: cannot overwrite existing <span class="token function">file</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># echo 123 &gt;| 1.txt </span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cat 1.txt </span>
<span class="token number">123</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>👇举例：编辑文本文件</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cat &gt; 2.txt </span>
<span class="token operator">&lt;</span>hello【回车】<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>hello world<span class="token operator">!</span>【回车】<span class="token operator">&gt;</span>
^C
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cat 2.txt </span>
hello
hello world<span class="token operator">!</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>👇举例：执行命令后不显示执行过程与提示</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># yum -y install net-tools &amp;&gt; /dev/null</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>👇举例：合并多个命令的结果至一个文件中</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ( cal 2019 ; cal 2020 ) &gt; all.txt</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># { ls;whoami; } &gt; /data/all.log </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>标准输出和错误输出各自定向至不同位置</strong></p> <div class="language-http line-numbers-mode"><pre class="language-http"><code>COMMAND &gt; /path/to/file.out 2&gt; /path/to/error.out
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls /data/ /error &gt; 1.txt 2&gt; 2.txt </span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cat 1.txt </span>
/data/:
<span class="token function">dir</span>
dir2
f1-.txt
testdir
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cat 2.txt </span>
ls: cannot access /error: No such <span class="token function">file</span> or directory
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>追加重定向</strong></p> <div class="language- extra-class"><pre><code>&gt;&gt; 可以在原有内容基础上，追加内容
</code></pre></div><div class="language-http line-numbers-mode"><pre class="language-http"><code>&gt;&gt;         追加标准输出重定向至文件
2&gt;&gt;        追加标准错误重定向至文件
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># uname -r &gt; 2.txt </span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cat 2.txt </span>
<span class="token number">3.10</span>.0-1160.el7.x86_64
<span class="token comment">## &gt; 重定向内容会覆盖</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># whoami &gt;&gt; 2.txt </span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cat 2.txt </span>
<span class="token number">3.10</span>.0-1160.el7.x86_64
root
<span class="token comment">## &gt;&gt; 追加重定向内容不会覆盖</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>👇举例：分别重定向</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos8 ~<span class="token punctuation">]</span><span class="token comment"># ls /data/ /error &gt; stdout.log 2&gt; stderr.log</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>合并标准输出和错误输出为同一个数据流进行重定向</strong></p> <div class="language-http line-numbers-mode"><pre class="language-http"><code>&amp;&gt;  	覆盖重定向
&amp;&gt;&gt; 	追加重定向
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>📍命令格式</strong>：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>COMMAND <span class="token operator">&gt;</span> /path/to/file.out <span class="token number">2</span><span class="token operator">&amp;&gt;</span><span class="token number">1</span>
COMMAND <span class="token operator">&gt;&gt;</span> /path/to/file.out <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>🔥举例：将标准输出和错误输出都重定向到同一个文件</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls /data/ /error &gt; /data/all.log 2&gt;&amp;1         （把错误输出重定向到标准输出的文件中）</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls /data/ /error 2&gt; /data/all.log 1&gt;&amp;2        （把标准输出重定向到错误输出的文件中）</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls /data/ /error &amp;&gt; /data/all.log </span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls /data/ /error &gt;&amp; /data/all.log </span>

<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls /data /error 2&gt;&amp;1 &gt; /data/all.log</span>
ls: cannot access /error: No such <span class="token function">file</span> or directory
<span class="token comment">##把2&gt;&amp;1放在&gt;前面的输出结果就不一样了，这样只把标准输出重定向到文件中，错误输出直接输出</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>👇举例：实现邮件通讯</p> <p>我们可以在Linux中绑定自己的QQ邮箱，然后将Linux里面的一些文件内容通过邮件发送出去</p> <p>前提条件：</p> <ol><li>关闭防火墙</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># systemctl stop firewalld</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>关闭SELinux</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/selinux/config</span>
<span class="token assign-left variable">SELINUX</span><span class="token operator">=</span>disabled
<span class="token comment">##将enforcing状态修改为disabled</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="https://raw.githubusercontent.com/frksb/blogImage/main/202205172034239.png" alt="image-20220418171423454"></p> <p><img src="https://raw.githubusercontent.com/frksb/blogImage/main/202205172034890.png" alt="image-20220418171628996"></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos8 ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/mail.rc</span>
<span class="token comment">##shift +g 跳到最后一行，添加以下内容</span>
<span class="token builtin class-name">set</span> <span class="token assign-left variable">from</span><span class="token operator">=</span><span class="token number">910747000</span>@qq.com
<span class="token builtin class-name">set</span> <span class="token assign-left variable">smtp</span><span class="token operator">=</span>smtp.qq.com
<span class="token builtin class-name">set</span> smtp-auth-user<span class="token operator">=</span><span class="token number">910747000</span>@qq.com
<span class="token builtin class-name">set</span> smtp-auth-password<span class="token operator">=</span>aamghrplulsdbejf                          <span class="token comment">##授权码</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># mail -s pts 2821994706@qq.com &lt; pts.txt</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></blockquote> <h4 id="标准输入重定向"><a href="#标准输入重定向" class="header-anchor">#</a> 标准输入重定向</h4> <p>从文件中导入STDIN，代替当前终端的输入设备，使用 &lt; 来重定向标准输入，某些命令能够接受从文件中导入的STDIN</p> <h5 id="🧩tr命令"><a href="#🧩tr命令" class="header-anchor">#</a> 🧩tr命令</h5> <p><code>tr</code>转换和删除字符</p> <p>📍<strong>命令格式</strong>：</p> <div class="language-http line-numbers-mode"><pre class="language-http"><code>tr [OPTION]... SET1 [SET2]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>常用选项</strong>：</p> <ul><li>-d ： --delete，删除所有属于第一字符集的字符</li> <li>-s  ：--squeeze-repeats，把连续重复的字符以单独一个字符表示,即去重</li> <li>-t   ：--truncate-set1，将第一个字符集对应字符转化为第二字符集对应的字符</li> <li>-c –C  ：--complement，取字符集的补集</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">\</span>NNN           character with octal value NNN <span class="token punctuation">(</span><span class="token number">1</span> to <span class="token number">3</span> octal digits<span class="token punctuation">)</span>
 <span class="token punctuation">\</span><span class="token punctuation">\</span>             backslash
 <span class="token punctuation">\</span>a             audible BEL
 <span class="token punctuation">\</span>b             backspace
 <span class="token punctuation">\</span>f             form feed
 <span class="token punctuation">\</span>n             new line
 <span class="token punctuation">\</span>r             <span class="token builtin class-name">return</span>
 <span class="token punctuation">\</span>t             horizontal tab
 <span class="token punctuation">\</span>v             vertical tab

<span class="token punctuation">[</span>:alnum:<span class="token punctuation">]</span>：字母和数字 
<span class="token punctuation">[</span>:alpha:<span class="token punctuation">]</span>：字母 
<span class="token punctuation">[</span>:digit:<span class="token punctuation">]</span>：数字 
<span class="token punctuation">[</span>:lower:<span class="token punctuation">]</span>：小写字母 
<span class="token punctuation">[</span>:upper:<span class="token punctuation">]</span>：大写字母 
<span class="token punctuation">[</span>:space:<span class="token punctuation">]</span>：空白字符 
<span class="token punctuation">[</span>:print:<span class="token punctuation">]</span>：可打印字符
<span class="token punctuation">[</span>:punct:<span class="token punctuation">]</span>：标点符号 
<span class="token punctuation">[</span>:graph:<span class="token punctuation">]</span>：图形字符 
<span class="token punctuation">[</span>:cntrl:<span class="token punctuation">]</span>：控制（非打印）字符 
<span class="token punctuation">[</span>:xdigit:<span class="token punctuation">]</span>：十六进制字符
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>👇举例：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># df &gt; /data/df.log</span>
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># tr -s ' ' &lt; df.log </span>
Filesystem 1K-blocks Used Available Use% Mounted on
devtmpfs <span class="token number">1002984</span> <span class="token number">0</span> <span class="token number">1002984</span> <span class="token number">0</span>% /dev
tmpfs <span class="token number">1013944</span> <span class="token number">0</span> <span class="token number">1013944</span> <span class="token number">0</span>% /dev/shm
tmpfs <span class="token number">1013944</span> <span class="token number">22396</span> <span class="token number">991548</span> <span class="token number">3</span>% /run
tmpfs <span class="token number">1013944</span> <span class="token number">0</span> <span class="token number">1013944</span> <span class="token number">0</span>% /sys/fs/cgroup
/dev/sda2 <span class="token number">104806400</span> <span class="token number">1605068</span> <span class="token number">103201332</span> <span class="token number">2</span>% /
/dev/sda3 <span class="token number">52403200</span> <span class="token number">33096</span> <span class="token number">52370104</span> <span class="token number">1</span>% /data
/dev/sda1 <span class="token number">999320</span> <span class="token number">104072</span> <span class="token number">826436</span> <span class="token number">12</span>% /boot
tmpfs <span class="token number">202792</span> <span class="token number">0</span> <span class="token number">202792</span> <span class="token number">0</span>% /run/user/0
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># tr -s ' ' : &lt; df.log </span>
Filesystem:1K-blocks:Used:Available:Use%:Mounted:on
devtmpfs:1002984:0:1002984:0%:/dev
tmpfs:1013944:0:1013944:0%:/dev/shm
tmpfs:1013944:22396:991548:3%:/run
tmpfs:1013944:0:1013944:0%:/sys/fs/cgroup
/dev/sda2:104806400:1605068:103201332:2%:/
/dev/sda3:52403200:33096:52370104:1%:/data
/dev/sda1:999320:104072:826436:12%:/boot
tmpfs:202792:0:202792:0%:/run/user/0

<span class="token comment">##将/etc/issue中的小写字符都转换成大写字符</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># tr ‘a-z’ ‘A-Z’ &lt; /etc/issue </span>

<span class="token comment">##删除文件中的所有abc中任意字符</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment">#tr -d abc &lt; list.txt </span>
/et
/in
/et/issue

<span class="token comment">##将Windows的文本转化Linux的文本格式</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># hexdump -C windows.txt </span>
00000000  <span class="token number">61</span> 0d 0a <span class="token number">62</span> 0d 0a <span class="token number">63</span>                             <span class="token operator">|</span>a<span class="token punctuation">..</span>b<span class="token punctuation">..</span>c<span class="token operator">|</span>
00000007
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># nano linux.txt</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># hexdump -C linux.txt </span>
00000000  <span class="token number">61</span> 0a <span class="token number">62</span> 0a <span class="token number">63</span> 0a                                 <span class="token operator">|</span>a.b.c.<span class="token operator">|</span>
00000006
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># tr -d '\r' &lt; windows.txt &gt; windows2.txt</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># hexdump -C windows2.txt</span>
00000000  <span class="token number">61</span> 0a <span class="token number">62</span> 0a <span class="token number">63</span>                                   <span class="token operator">|</span>a.b.c<span class="token operator">|</span>
00000005
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># file windows2.txt</span>
windows2.txt: ASCII text
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><blockquote><p>👇举例：</p> <ol><li>将<code>/root</code>下文件列表，显示成一行，并且文件名之间用空格隔开</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls /root/ | tr '' '\n'</span>
<span class="token number">1</span>.txt
<span class="token number">2</span>.txt
anaconda-ks.cfg
-f
frk.txt
list.txt
motd_peiqi
test.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ol start="2"><li>处理字符串“<code>xt.,l 1 jr#!$mn 2 c*/fe 3 uz 4</code>”，只保留其中的数字和空格</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># echo xt.,l 1 jr#'\n'mn 2 c*/fe 3 uz 4 | tr -d [[:alpha:]]*[[:punct:]]</span>
<span class="token number">1</span>  <span class="token number">2</span>  <span class="token number">3</span>  <span class="token number">4</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="3"><li>将文件<code>/etc/centos-release</code>中每个单词（由字母组成）显示在独立一行，并无空行</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cat /etc/centos-release | tr -d &quot;[0-9].*&quot; | tr -s ' ' '\n'</span>
CentOS
Linux
release
<span class="token punctuation">(</span>Core<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></blockquote> <h5 id="标准输入重定向-2"><a href="#标准输入重定向-2" class="header-anchor">#</a> 标准输入重定向</h5> <p>实现标准输入重定向的符号</p> <div class="language-http line-numbers-mode"><pre class="language-http"><code>COMMAND 0&lt; FILE
COMMAND &lt; FILE
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>👇举例：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># echo 2*3 &gt; js.txt</span>
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># bc &lt; js.txt </span>
<span class="token number">6</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>可以使用文件来代替键盘的单条输入</p> <div class="language-http line-numbers-mode"><pre class="language-http"><code>cat &lt; file1 &gt; file2
cat &lt; file1 &gt;&gt; file1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>👇举例：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cat mail.txt</span>
hello
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cat &lt; mail.txt &gt; mail2.txt</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cat mail2.txt</span>
hello
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="把多行重定向"><a href="#把多行重定向" class="header-anchor">#</a> 把多行重定向</h5> <p>使用“&lt;&lt;终止词”命令从键盘把多行重导向给STDIN，知道终止词位置之前的所有文本都发送给STDIN，有时被称为就地文本(here documents)。其中终止词可以是任何一个或多个符号，比如：!，@，$，<strong>EOF</strong>(End Of File)等，其中EOF比较常用。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># cat &gt; js.txt &lt;&lt;EOF</span>
<span class="token operator">&gt;</span> <span class="token number">1</span>
<span class="token operator">&gt;</span> <span class="token number">2</span>
<span class="token operator">&gt;</span> <span class="token number">3</span>
<span class="token operator">&gt;</span> <span class="token number">4</span>
<span class="token operator">&gt;</span> <span class="token number">5</span>
<span class="token operator">&gt;</span> <span class="token number">6</span>
<span class="token operator">&gt;</span> EOF
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="管道"><a href="#管道" class="header-anchor">#</a> 管道</h3> <p>管道（使用符号“ | ”表示）用来连接多个命令。</p> <p><strong>📍命令格式</strong>：</p> <div class="language-http line-numbers-mode"><pre class="language-http"><code>命令1 | 命令2 | 命令3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>功能说明：</p> <ul><li>将命令1的STDOUT发送给命令2的STDIN，命令2的STDOUT发送到命令3的STDIN</li> <li>所有命令会在当前shell进程的子shell进程中执行</li> <li>组合多种工具的功能</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>🔥计算1+2+3+<span class="token punctuation">..</span><span class="token punctuation">..</span>+100的值
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># seq -s+ 100</span>
<span class="token number">1</span>+2+3+4+5+6+7+8+9+10+11+12+13+14+15+16+17+18+19+20+21+22+23+24+25+26+27+28+29+30+31+32+33+34+35+36+37+38+39+40+41+42+43+44+45+46+47+48+49+50+51+52+53+54+55+56+57+58+59+60+61+62+63+64+65+66+67+68+69+70+71+72+73+74+75+76+77+78+79+80+81+82+83+84+85+86+87+88+89+90+91+92+93+94+95+96+97+98+99+100
<span class="token punctuation">[</span>root@centos data<span class="token punctuation">]</span><span class="token comment"># seq -s+ 100 | bc</span>
<span class="token number">5050</span>

🔥修改密码
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># echo 000000 | passwd --stdin peggie</span>
Changing password <span class="token keyword">for</span> user wang.
passwd: all authentication tokens updated successfully.
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># echo 000000 | passwd --stdin peggie &amp;&gt; /dev/null</span>

<span class="token comment">##less实现分页地查看输入</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls -l /data/ | less</span>
total <span class="token number">16</span>
-rw-r--r--. <span class="token number">1</span> root root  <span class="token number">65</span> Apr <span class="token number">18</span> <span class="token number">16</span>:39 all.log
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">503</span> Apr <span class="token number">18</span> <span class="token number">18</span>:02 df.log
drwxr-xr-x. <span class="token number">3</span> root root  <span class="token number">34</span> Apr <span class="token number">17</span> <span class="token number">22</span>:30 <span class="token function">dir</span>
lrwxrwxrwx. <span class="token number">1</span> root root  <span class="token number">10</span> Apr <span class="token number">17</span> <span class="token number">22</span>:36 dir2 -<span class="token operator">&gt;</span> /data/dir/
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">376</span> Apr <span class="token number">17</span> <span class="token number">21</span>:30 f1-.txt
-rw-r--r--. <span class="token number">1</span> root root  <span class="token number">12</span> Apr <span class="token number">18</span> <span class="token number">18</span>:20 js.txt
drwxr-xr-x. <span class="token number">5</span> root root  <span class="token number">42</span> Apr <span class="token number">17</span> <span class="token number">14</span>:44 testdir
<span class="token punctuation">(</span>END<span class="token punctuation">)</span>  【q退出】
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>❗❗注意：STDERR默认不能通过管道转发，可利用<code>2&gt;&amp;1</code>或<code>|&amp;</code>实现</p> <p><strong>📍命令格式</strong>：</p> <div class="language-http line-numbers-mode"><pre class="language-http"><code>命令1 2&gt;&amp;1 | 命令2
命令1  |&amp;  命令2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>👇举例：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls /data /error 2&gt;&amp;1 | tr 'a-z' 'A-Z'</span>
或
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># ls /data /error |&amp; tr 'a-z' 'A-Z'</span>
LS: CANNOT ACCESS <span class="token string">'/XXX'</span><span class="token builtin class-name">:</span> NO SUCH FILE OR DIRECTORY
/DATA:
ALL.LOG
F1.TXT
PASSWD.LOG
STERR.LOG
STOUT.LOG
TEST.LOG
TOUCH.LOG
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="🧩tee命令"><a href="#🧩tee命令" class="header-anchor">#</a> 🧩tee命令</h4> <p>利用<code>tee</code>命令可以重定向到多个目标，经常配合管道符一起使用</p> <p><strong>📍命令格式</strong>：</p> <div class="language-http line-numbers-mode"><pre class="language-http"><code>命令1 | tee [-a] 文件名 | 命令2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>以上可以把命令1地STDOUT保存在文件中，作为命令2的输入</p> <p><strong>常用选项</strong>：</p> <ul><li>-a ： 追加，保留原文件的内容</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># who | tee 1.txt </span>
root     pts/0        <span class="token number">2022</span>-04-18 <span class="token number">19</span>:05 <span class="token punctuation">(</span><span class="token number">10.0</span>.0.1<span class="token punctuation">)</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cat 1.txt </span>
root     pts/0        <span class="token number">2022</span>-04-18 <span class="token number">19</span>:05 <span class="token punctuation">(</span><span class="token number">10.0</span>.0.1<span class="token punctuation">)</span>
<span class="token comment">##当再次重定向到该文件，旧文件内容会被新文件内容覆盖</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cat /etc/redhat-release | tee 1.txt </span>
CentOS Linux release <span class="token number">7.9</span>.2009 <span class="token punctuation">(</span>Core<span class="token punctuation">)</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cat 1.txt </span>
CentOS Linux release <span class="token number">7.9</span>.2009 <span class="token punctuation">(</span>Core<span class="token punctuation">)</span>
<span class="token comment">##加选项-a则保留原文件内容</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># who | tee -a 1.txt </span>
root     pts/0        <span class="token number">2022</span>-04-18 <span class="token number">19</span>:05 <span class="token punctuation">(</span><span class="token number">10.0</span>.0.1<span class="token punctuation">)</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cat 1.txt </span>
CentOS Linux release <span class="token number">7.9</span>.2009 <span class="token punctuation">(</span>Core<span class="token punctuation">)</span>
root     pts/0        <span class="token number">2022</span>-04-18 <span class="token number">19</span>:05 <span class="token punctuation">(</span><span class="token number">10.0</span>.0.1<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>功能：</p> <ul><li>保存不同阶段的输出</li> <li>复杂管道的故障排除</li> <li>同时查看和记录输出</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># cat &lt;&lt;EOF | tee -a /etc/mail.rc</span>
<span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> <span class="token assign-left variable">from</span><span class="token operator">=</span><span class="token number">910747000</span>@qq.com
<span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> <span class="token assign-left variable">smtp</span><span class="token operator">=</span>smtp.qq.com
<span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> smtp-auth-user<span class="token operator">=</span><span class="token number">910747000</span>@qq.com
<span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> smtp-auth-password<span class="token operator">=</span>aamghrplulsdbejf  
<span class="token operator">&gt;</span> EOF
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="重定向中的-符号"><a href="#重定向中的-符号" class="header-anchor">#</a> 重定向中的-符号</h3> <p>👇举例：当在网站上下载一个脚本，但并不想保存在主机里，只在执行命令后显示脚本内容</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># wget -O - http://www.peggie.com/testdir/hello.sh </span>
--2020-04-23 <span class="token number">11</span>:06:52-- http://www.wangxiaochun.com/testdir/hello.sh
Resolving www.wangxiaochun.com <span class="token punctuation">(</span>www.wangxiaochun.com<span class="token punctuation">)</span><span class="token punctuation">..</span>. <span class="token number">58.87</span>.87.99
Connecting to www.wangxiaochun.com <span class="token punctuation">(</span>www.wangxiaochun.com<span class="token punctuation">)</span><span class="token operator">|</span><span class="token number">58.87</span>.87.99<span class="token operator">|</span>:80<span class="token punctuation">..</span>. 
connected.
HTTP request sent, awaiting response<span class="token punctuation">..</span>. <span class="token number">200</span> OK
Length: <span class="token number">388</span> <span class="token punctuation">[</span>application/octet-stream<span class="token punctuation">]</span>
Saving to: ‘STDOUT’
-       <span class="token number">0</span>%<span class="token punctuation">[</span>                                         <span class="token punctuation">]</span>       <span class="token number">0</span>  --.-KB/s         
      
<span class="token comment">#!/bin/bash</span>
<span class="token comment"># ------------------------------------------</span>
<span class="token comment"># Filename: hello.sh</span>
<span class="token comment"># Version:   1.0</span>
<span class="token comment"># Date: 2022/04/18</span>
<span class="token comment"># Author: peggie</span>
<span class="token comment"># Email: 910747000@qq.com</span>
<span class="token comment"># Website: www.peggie.com</span>
<span class="token comment"># Description: This is the first script</span>
<span class="token comment"># Copyright: 2022 peggie</span>
<span class="token comment"># License: GPL</span>
<span class="token comment"># ------------------------------------------</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;hello world!&quot;</span>
-                           <span class="token number">100</span>%<span class="token punctuation">[</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">]</span>     
<span class="token number">388</span>  --.-KB/s    <span class="token keyword">in</span> 0s      
<span class="token number">2020</span>-04-23 <span class="token number">11</span>:06:57 <span class="token punctuation">(</span><span class="token number">16.4</span> MB/s<span class="token punctuation">)</span> - written to stdout <span class="token punctuation">[</span><span class="token number">388</span>/388<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><blockquote><p>👇举例：</p> <p>将<code>/home</code>里面的文件打包，但打包的数据不是记录到文件，而是传送的STDOUT，经过管道后，将<code>tar -cvf - /home</code>传送到后面的<code>tar -xvf -</code> ，后面的这个<code>-</code>则是取前一个命令的STDOUT，因此，就不需要使用临时<code>file</code>了</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># tar -cvf - /home | tar -xvf -</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></blockquote></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/frksb/frksb.github.io/edit/master/docs/《Linux》笔记/03.文件管理与IO重定向.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/c01e45/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Linux基础入门</div></a> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/c01e45/" class="prev">Linux基础入门</a></span> <!----></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/c01e45/"><div>
            Linux基础入门
            <!----></div></a> <span class="date">05-17</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/c96d71/"><div>
            索引
            <!----></div></a> <span class="date">05-17</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/504aaa/"><div>
            计算机基础与操作系统
            <!----></div></a> <span class="date">05-16</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:910747000@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/frksb" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://welly.zone" title="blog" target="_blank" class="iconfont icon-blog"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2022
    <span>Welly | <a href="https://github.com/frksb" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.01d507bc.js" defer></script><script src="/assets/js/2.93cb7982.js" defer></script><script src="/assets/js/34.3bce2d0a.js" defer></script>
  </body>
</html>
